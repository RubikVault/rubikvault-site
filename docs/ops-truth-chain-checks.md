# OPS Truth-Chain Checks (Scaffold)

This document lists **future** OPS checks to validate UI → data integrity. It does **not** change OPS behavior.

## UI Data Integrity
- `latest_bar.date` (API) must match the UI “as-of” date shown in /analyze/:ticker.
- `day_abs` must equal `latest_close - prev_close` within epsilon.
- `day_pct` must equal `day_abs / prev_close` within epsilon.
- `volume` must be an integer and match `latest_bar.volume`.
- UI must display `meta.status` and `meta.mode` badges if present.

## Schema & Contract
- All analyzer endpoints must include `schema_version` and `meta.status`.
- `meta.asOf` must be ISO or null (never "—").
- `meta.data_source` must be one of: `real_provider | snapshot | synthetic_seed | unknown`.
- `meta.mode` must be one of: `LIVE | DEMO | DEGRADED`.

## Source-of-Truth Checks
- If `meta.data_source = snapshot`, corresponding snapshot artifact must exist and include ticker.
- If `meta.data_source = real_provider`, provider chain must be captured in `metadata.source_chain`.
- Marketphase/analysis artifacts must list schema versions and include the ticker entry (if expected).

## Preview vs Production Expectations
- Preview: missing runtime keys must not flip UI into ERROR if snapshot data exists.
- Production: missing artifacts should be ERROR and must be shown as such.

## Operational Metadata
- `/data/snapshots/build-info/latest.json` must exist and include `data.commitSha`.
- `public/debug/truth-chain/<TICKER>.trace.json` must be generated by trace tooling for audit.
