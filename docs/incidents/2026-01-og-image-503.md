# Incident: og-image returned 503 JSON instead of SVG

## Symptom
- GET /api/og-image returned HTTP 503
- Content-Type: application/json
- Body contained SCHEMA_INVALID error

## Root Cause
The global API middleware attempted to JSON-parse a binary SVG response.
Non-JSON responses were wrapped into error envelopes.

## Evidence
- og-image.js locally returned image/svg+xml
- Production responses showed JSON error wrapping
- Preview deployment confirmed middleware involvement
```
curl -I https://rubikvault.com/api/og-image?symbol=AAPL
curl -I https://rubikvault.com/api/og-image?symbol=AAPL&debug=1
```

## Fix
- Middleware short-circuits /api/og-image
- Middleware returns passthrough for any non-JSON Content-Type
- JSON parsing is only performed when Content-Type is application/json
- Parse errors degrade gracefully (original response returned)

## Verification
- rv_smoke_json_envelope (see docs/runbooks/smoke-tests.md)
- rv_smoke_og https://rubikvault.com/api/og-image?symbol=AAPL
- HTTP 200 + image/svg+xml confirmed (with and without ?debug=1)

## Lessons Learned
- Content-Type is authoritative
- Middleware must never assume JSON
- Smoke tests > assumptions
