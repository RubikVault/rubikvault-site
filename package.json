{
  "type": "module",
  "scripts": {
    "prepare:data": "node scripts/copy-feature-registry.mjs",
    "dev": "npm run prepare:data && npm run dev:pages",
    "build": "npm run prepare:data",
    "dev:pages": "wrangler pages dev public --ip 127.0.0.1 --port 8788 --kv RV_KV --compatibility-date=2025-12-17 --inspector-port 0",
    "dev:pages:persist": "wrangler pages dev public --ip 127.0.0.1 --port 8788 --kv RV_KV --persist-to .wrangler/state --compatibility-date=2025-12-17 --inspector-port 0",
    "dev:pages:port": "PORT=${PORT:-8788} wrangler pages dev public --ip 127.0.0.1 --port $PORT --kv RV_KV --compatibility-date=2025-12-17 --inspector-port 0",
    "test:endpoints:local": "curl -sf --max-time 12 http://127.0.0.1:8788/api/news && curl -sf --max-time 25 http://127.0.0.1:8788/api/hype-divergence && curl -sf --max-time 12 http://127.0.0.1:8788/api/congress-trading && curl -sf --max-time 12 http://127.0.0.1:8788/api/breakout-energy && echo OK",
    "test:diag": "curl -s --max-time 12 http://127.0.0.1:8788/api/diag | jq '.summary // .data?.summary'",
    "dev:pages:std": "wrangler pages dev public --port 8788 --kv RV_KV --compatibility-date=2025-12-17",
    "dev:pages:persist:std": "wrangler pages dev public --port 8788 --kv RV_KV --persist-to .wrangler/state --compatibility-date=2025-12-17",
    "dev:pages:port:std": "PORT=${PORT:-8788} wrangler pages dev public --port $PORT --kv RV_KV --compatibility-date=2025-12-17",
    "audit:reality": "node scripts/audit/generate-reality.mjs",
    "audit:registry": "node scripts/audit/build-feature-registry.mjs --mode discover",
    "audit:stubs": "node scripts/audit/generate-stub-mirrors.mjs",
    "audit:artifacts": "node scripts/audit/build-artifacts.mjs",
    "audit:local": "node scripts/audit-site.mjs --mode local --base public --format table",
    "audit:json": "node scripts/audit-site.mjs --mode local --base public --format json --fail-on none",
    "audit:strict": "node scripts/audit-site.mjs --mode local --base public --format json --fail-on bad",
    "audit:live": "node scripts/audit-site.mjs --mode live --url https://rubikvault.com --format table --fail-on bad",
    "audit": "npm run audit:reality && npm run audit:registry && npm run audit:stubs && npm run audit:artifacts && npm run audit:local",
    "build:registry": "node scripts/build-registry.js",
    "validate:registry": "node scripts/validate-registry.js",
    "simulate:cost": "node scripts/simulate-cost.js",
    "test:contracts": "node scripts/contract-smoke.js",
    "test:drop-threshold": "node tests/drop-threshold.test.mjs",
    "test:fetch-retry": "node tests/fetch-retry.test.mjs",
    "test:p2-build-id": "node tests/p2-build-id.test.mjs",
    "test:p3-kv-write": "node tests/p3-kv-write-dedup.test.mjs",
    "test:metrics-v5": "node scripts/metrics-v5-gates.mjs",
    "test:market-stats-artifact": "node tests/market-stats-artifact.test.mjs",
    "test:market-stats-metrics": "node tests/market-stats-metrics.test.mjs",
    "test:market-score-artifact": "node tests/market-score-artifact.test.mjs",
    "test:market-score-metrics": "node tests/market-score-metrics.test.mjs",
    "test:search-universe-filter": "node tests/search-universe-filter.test.mjs",
    "test:universe-artifact": "node tests/universe-artifact.test.mjs",
    "test:universe-normalize": "node tests/universe-normalize.test.mjs",
    "validate:snapshots": "node scripts/validate-snapshots.js",
    "validate:public-registry": "node scripts/validate-public-registry.mjs",
    "smoke:redirects": "sh scripts/smoke-redirects.sh",
    "smoke:redirects:preview": "BASE_URL=$PREVIEW_URL sh scripts/smoke-redirects.sh",
    "test:universe-registry": "node scripts/validate/universe-registry.v1.mjs",
    "test:providers-registry": "node tests/providers-registry.test.mjs",
    "test:market-prices-artifact": "node scripts/validate/market-prices-artifact.v1.mjs",
    "test:market-prices-real-mode": "node tests/market-prices-real-mode.test.mjs",
    "test:stock-endpoint": "node tests/stock-endpoint.test.mjs"
  },
  "dependencies": {
    "d3-dsv": "^3.0.1",
    "fast-xml-parser": "^4.5.3",
    "ml-cart": "^2.1.1",
    "ml-logistic-regression": "^2.0.0",
    "ml-random-forest": "^2.1.0",
    "rss-parser": "^3.13.0",
    "simple-statistics": "^7.8.8"
  },
  "devDependencies": {
    "ajv-cli": "^5.0.0",
    "wrangler": "4.56.0"
  }
}
