{
  "type": "module",
  "scripts": {
    "prepare:data": "node scripts/copy-feature-registry.mjs && node scripts/ops/build-build-info.mjs",
    "dev": "npm run prepare:data && npm run dev:pages",
    "build": "npm run prepare:data",
    "dev:pages": "wrangler pages dev public --ip 127.0.0.1 --port 8788 --kv RV_KV --compatibility-date=2025-12-17 --inspector-port 0",
    "dev:pages:persist": "wrangler pages dev public --ip 127.0.0.1 --port 8788 --kv RV_KV --persist-to .wrangler/state --compatibility-date=2025-12-17 --inspector-port 0",
    "dev:pages:port": "PORT=${PORT:-8788} wrangler pages dev public --ip 127.0.0.1 --port $PORT --kv RV_KV --compatibility-date=2025-12-17 --inspector-port 0",
    "test:endpoints:local": "curl -sf --max-time 12 http://127.0.0.1:8788/api/news && curl -sf --max-time 25 http://127.0.0.1:8788/api/hype-divergence && curl -sf --max-time 12 http://127.0.0.1:8788/api/congress-trading && curl -sf --max-time 12 http://127.0.0.1:8788/api/breakout-energy && echo OK",
    "test:diag": "curl -s --max-time 12 http://127.0.0.1:8788/api/diag | jq '.summary // .data?.summary'",
    "dev:pages:std": "wrangler pages dev public --port 8788 --kv RV_KV --compatibility-date=2025-12-17",
    "dev:pages:persist:std": "wrangler pages dev public --port 8788 --kv RV_KV --persist-to .wrangler/state --compatibility-date=2025-12-17",
    "dev:pages:port:std": "PORT=${PORT:-8788} wrangler pages dev public --port $PORT --kv RV_KV --compatibility-date=2025-12-17",
    "audit:reality": "node scripts/audit/generate-reality.mjs",
    "audit:registry": "node scripts/audit/build-feature-registry.mjs --mode discover",
    "audit:stubs": "node scripts/audit/generate-stub-mirrors.mjs",
    "audit:artifacts": "node scripts/audit/build-artifacts.mjs",
    "audit:local": "node scripts/audit-site.mjs --mode local --base public --format table",
    "audit:json": "node scripts/audit-site.mjs --mode local --base public --format json --fail-on none",
    "audit:strict": "node scripts/audit-site.mjs --mode local --base public --format json --fail-on bad",
    "audit:live": "node scripts/audit-site.mjs --mode live --url https://rubikvault.com --format table --fail-on bad",
    "audit": "npm run audit:reality && npm run audit:registry && npm run audit:stubs && npm run audit:artifacts && npm run audit:local",
    "build:registry": "node scripts/build-registry.js",
    "validate:registry": "node scripts/validate-registry.js",
    "simulate:cost": "node scripts/simulate-cost.js",
    "validate:symbols": "node scripts/validate-symbols.mjs",
    "test:envelope": "node scripts/test-envelope.mjs",
    "test:scheduler": "node scripts/test-scheduler.mjs",
    "test:truth-chain": "node scripts/test-truth-chain.mjs",
    "test:missing-mirror": "node scripts/ops/verify-missing-mirror-semantic.mjs",
    "test:ops": "npm run test:ops-policy && npm run test:ops-artifacts && npm run test:ops-ui-smoke",
    "test:ops-artifacts": "node scripts/ops/test-ops-artifacts.mjs",
    "test:ops-ui-smoke": "node scripts/ops/test-ops-ui-smoke.mjs",
    "test:ops-ui": "node scripts/ops/test-ops-ui.mjs",
    "test:ops-summary": "node scripts/ops/rv_verify_truth_summary.mjs",
    "test:ops-policy": "node scripts/ops/validate-ops-health-policy.mjs",
    "test:ops-core": "node scripts/ops/rv_ops_assert_core_green.mjs",
    "verify:contracts": "bash ./scripts/ops/rv_verify_contracts.sh",
    "test:contracts": "npm run validate:symbols && npm run test:envelope && npm run test:scheduler && node scripts/contract-smoke.js && npm run test:truth-chain && npm run test:missing-mirror && node tests/build-info-artifact.test.mjs",
    "test:drop-threshold": "node tests/drop-threshold.test.mjs",
    "test:fetch-retry": "node tests/fetch-retry.test.mjs",
    "test:p2-build-id": "node tests/p2-build-id.test.mjs",
    "test:p3-kv-write": "node tests/p3-kv-write-dedup.test.mjs",
    "test:metrics-v5": "node scripts/metrics-v5-gates.mjs",
    "test:market-stats-artifact": "node tests/market-stats-artifact.test.mjs",
    "test:market-stats-metrics": "node tests/market-stats-metrics.test.mjs",
    "test:market-score-artifact": "node tests/market-score-artifact.test.mjs",
    "test:market-score-metrics": "node tests/market-score-metrics.test.mjs",
    "test:stooq-parser": "node tests/stooq-parser.test.mjs",
    "test:market-prices-source": "node tests/market-prices-source.test.mjs",
    "test:finalizer": "node tests/finalize.test.mjs",
    "test:search-universe-filter": "node tests/search-universe-filter.test.mjs",
    "test:universe-artifact": "node tests/universe-artifact.test.mjs",
    "test:universe-normalize": "node tests/universe-normalize.test.mjs",
    "validate:snapshots": "node scripts/validate-snapshots.js",
    "validate:public-registry": "node scripts/validate-public-registry.mjs",
    "smoke:redirects": "sh scripts/smoke-redirects.sh",
    "smoke:redirects:preview": "BASE_URL=$PREVIEW_URL sh scripts/smoke-redirects.sh",
    "test:universe-registry": "node scripts/validate/universe-registry.v1.mjs",
    "test:providers-registry": "node tests/providers-registry.test.mjs",
    "test:market-prices-artifact": "node scripts/validate/market-prices-artifact.v1.mjs",
    "test:market-prices-real-mode": "node tests/market-prices-real-mode.test.mjs",
    "test:stock-endpoint": "node tests/stock-endpoint.test.mjs",
    "test:stock-ui-extras": "node scripts/test/stock-ui-extras.test.mjs",
    "test:ops:provenance": "node scripts/ops/rv_verify_count_provenance.mjs",
    "build:stock-ui-artifacts": "node scripts/ui/build-benchmarks-latest.mjs && node scripts/ui/build-peers-latest.mjs && node scripts/ui/build-correlations-latest.mjs",
    "verify:stock-ui-artifacts": "node scripts/ci/verify-stock-ui-artifacts.mjs",
    "rv:eod:nasdaq100": "node scripts/eod/build-eod-latest.mjs --universe nasdaq100 --chunk-size 500 --out public/data",
    "rv:ops": "node scripts/ops/build-ops-daily.mjs",
    "rv:eod:history": "node scripts/eod/build-eod-history.mjs --universe all --out public/data",
    "build:pipeline-truth": "node scripts/pipeline/build-ndx100-pipeline-truth.mjs",
    "test:truth-artifacts": "bash ./scripts/ops/verify-truth-artifacts.sh",
    "build:scientific-analysis": "node scripts/scientific-analyzer/generate-analysis.mjs",
    "test:determinism": "node --test tests/determinism/forecast-determinism.test.mjs",
    "test:forecast": "npm run validate:forecast-schemas && npm run validate:forecast-registry",
    "validate:forecast-schemas": "npx ajv validate -s schemas/registry.v1.json -d public/data/forecast/models/registry.json --strict=false",
    "validate:forecast-registry": "node scripts/forecast/validate-registry.mjs",
    "test:forecast-ui": "node tests/forecast-ui-smoke.test.mjs",
    "validate:policies:v3": "node scripts/validators/validate-policies.v3.mjs",
    "build:v3:forensics": "node scripts/validators/build-v3-forensics.mjs",
    "check:v3:collisions": "node scripts/validators/check-v3-collisions.mjs",
    "check:v3:determinism": "node scripts/validators/check-v3-determinism.mjs",
    "check:v3:universe": "node scripts/validators/check-universe-coverage.v3.mjs",
    "v7:phase0": "node scripts/universe-v7/phase0-archeology.mjs",
    "v7:preflight": "node scripts/universe-v7/preflight-v7.mjs",
    "v7:gate:law": "node scripts/universe-v7/gates/check-law-coverage.mjs",
    "v7:gate:single-ingestor": "node scripts/universe-v7/gates/single-ingestor-guard.mjs",
    "v7:gate:ui": "node scripts/universe-v7/gates/ui-safety-check.mjs",
    "v7:gate:license": "node scripts/universe-v7/gates/license-leak-scan.mjs",
    "v7:pipeline": "node scripts/universe-v7/pipeline-v7.mjs",
    "v7:publish": "node scripts/universe-v7/publish-two-phase.mjs",
    "v7:run": "node scripts/universe-v7/run-v7.mjs",
    "v7:run:daily-lite": "node scripts/universe-v7/run-v7.mjs --publish --backfill-max 0",
    "v7:run:loop": "node scripts/universe-v7/run-backfill-loop.mjs",
    "v7:run:feature-loops": "node scripts/universe-v7/run-feature-learning-loops.mjs",
    "v7:monitor:calls": "node scripts/universe-v7/monitor-call-thresholds.mjs --step 20000 --poll-ms 15000 --max-calls 100000",
    "v7:run:daily-stack": "node scripts/universe-v7/run-daily-stack.mjs",
    "v7:plan:backfill": "node scripts/universe-v7/build-backfill-priority-plan.mjs",
    "v7:marketphase:deep": "node scripts/universe-v7/build-marketphase-deep-summary.mjs --min-bars 200 --feature marketphase",
    "v7:report:coverage": "node scripts/universe-v7/report-coverage-progress.mjs",
    "v7:report:forecast-pack-coverage": "node scripts/universe-v7/report-forecast-pack-coverage.mjs",
    "v7:gate:feature-parity": "node scripts/universe-v7/gates/feature-universe-parity.mjs",
    "v7:gate:stocks-history-complete": "node scripts/universe-v7/gates/stocks-history-completion-gate.mjs",
    "v7:run:stocks-prio1": "node scripts/universe-v7/run-stocks-prio1.mjs",
    "v7:verify:index-resolution": "node scripts/universe-v7/verify-index-symbol-resolution.mjs",
    "test:v7": "node tests/v7/env-loader.test.mjs && node tests/v7/law-registry.test.mjs && node tests/v7/pipeline-offline.test.mjs && node tests/v7/incremental-pack-write-flag.test.mjs && node scripts/universe-v7/gates/check-law-coverage.mjs",
    "test:v7:search": "node tests/v7/universe-search-single-letter.test.mjs",
    "quantlab:dry-run": "cd quantlab && uv run python -m quantlab dry-run",
    "quantlab:daily": "cd quantlab && uv run python -m quantlab run daily",
    "quantlab:publish": "cd quantlab && uv run python -m quantlab publish",
    "quantlab:audit": "cd quantlab && uv run python -m quantlab audit verify",
    "dp0:v3": "node scripts/dp0/universe-sync.v3.mjs",
    "dp1:v3": "node scripts/dp1/eod-snapshot.v3.mjs --exchange US",
    "dp1_5:v3": "node scripts/dp1_5_fx/fx-rates.v3.mjs",
    "dp2:v3": "node scripts/dp2/actions.v3.mjs",
    "dp3:v3": "node scripts/dp3/adjusted-series.v3.mjs",
    "dp4:v3": "node scripts/dp4/pulse.v3.mjs",
    "dp5:v3": "node scripts/dp5/news-signals.v3.mjs",
    "dp6:v3": "node scripts/dp6/indicators.v3.mjs",
    "dp7:v3": "node scripts/dp7/sector-mapping.v3.mjs",
    "dp7:top-setups": "node scripts/dp7/top-setups.v3.mjs",
    "dp8:market-hub": "node scripts/dp8/market-hub.v3.mjs",
    "dp9:ideas-hub": "node scripts/dp9/ideas-hub.v3.mjs",
    "build:supermodules": "node scripts/build-supermodules.mjs",
    "build:supermodules:risk": "node scripts/build-supermodules.mjs --module risk_resilience",
    "build:supermodules:macro": "node scripts/build-supermodules.mjs --module macro_os",
    "build:supermodules:truth": "node scripts/build-supermodules.mjs --module fundamental_truth",
    "build:supermodules:dry-run": "node scripts/build-supermodules.mjs --dry-run",
    "build:scientific": "node scripts/build-scientific-summary.mjs",
    "build:v3:daily": "npm run dp0:v3 && npm run dp1:v3 && npm run dp1_5:v3 && npm run dp2:v3 && npm run dp3:v3 && npm run dp4:v3 && npm run dp5:v3 && npm run dp6:v3",
    "test:v3:fixtures": "node scripts/contracts/validate-v3-fixtures.mjs",
    "test:v3:unit": "node --test tests/unit/*.v3.test.mjs",
    "test:v3:contracts": "node scripts/contracts/validate-v3-artifacts.mjs",
    "test:v3:dry-run": "node scripts/contracts/run-v3-dry-run.mjs"
  },
  "dependencies": {
    "d3-dsv": "^3.0.1",
    "fast-xml-parser": "^4.5.3",
    "ml-cart": "^2.1.1",
    "ml-logistic-regression": "^2.0.0",
    "ml-random-forest": "^2.1.0",
    "rss-parser": "^3.13.0",
    "simple-statistics": "^7.8.8"
  },
  "devDependencies": {
    "@playwright/test": "^1.58.0",
    "ajv": "^8.17.1",
    "ajv-cli": "^5.0.0",
    "ajv-formats": "^3.0.1",
    "pdfkit": "^0.17.2",
    "playwright": "^1.58.0",
    "wrangler": "4.56.0"
  }
}
