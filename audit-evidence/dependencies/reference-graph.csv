WORKFLOW,PUBLISHES,REQUIRES_SECRETS,CALLED_BY,CALLS_SCRIPTS
ci-determinism,"NONE","NONE","NONE","NONE"
ci-gates,"      - 'public/data/**';      - 'public/data/**';          mkdir -p public/data;          if ! find public/data -type f -name ""*.json"" -print -quit | grep -q .; then;            SENTINEL_PATH=""public/data/.budget_sentinel.json"";            echo ""ℹ️ Created budget sentinel at $SENTINEL_PATH (no tracked public/data json artifacts in checkout)"";          # Count files in public/data;          TOTAL_FILES=$(find public/data -type f -name ""*.json"" | wc -l | tr -d ' ');          LARGE_FILES=$(find public/data -type f -name ""*.json"" -size +${MAX_SIZE_MB}M || true);            find public/data -type f -name ""*.json"" -size +${MAX_SIZE_MB}M -exec ls -lh {} \;;          for module_dir in public/data/snapshots/*/; do;          TOTAL_SIZE=$(du -sb public/data 2>/dev/null | cut -f1 || true);            TOTAL_SIZE=$(du -sk public/data 2>/dev/null | awk '{print $1 * 1024}' || true);          if [ -f public/data/manifest.json ] && [ -f schemas/manifest.schema.json ]; then;            npx --yes ajv-cli@5 validate -s schemas/manifest.schema.json -d public/data/manifest.json;          if [ -f public/data/provider-state.json ] && [ -f schemas/provider-state.schema.json ]; then;            npx --yes ajv-cli@5 validate -s schemas/provider-state.schema.json -d public/data/provider-state.json;            for snapshot in public/data/snapshots/*/latest.json; do;          if [ -f public/data/manifest.json ]; then;            if ! jq empty public/data/manifest.json 2>/dev/null; then;              SCHEMA_VERSION=$(jq -r '.schema_version // ""missing""' public/data/manifest.json);              ACTIVE_BUILD_ID=$(jq -r '.active_build_id // ""missing""' public/data/manifest.json);          if [ -f public/data/provider-state.json ]; then;            if ! jq empty public/data/provider-state.json 2>/dev/null; then;          for snapshot in public/data/snapshots/*/latest.json; do;          if [ ! -f public/data/manifest.json ]; then;          PUBLISHED_MODULES=$(jq -r '.modules | to_entries | .[] | select(.value.published == true) | .key' public/data/manifest.json);            MANIFEST_DIGEST=$(jq -r "".modules[\""$module\""].digest"" public/data/manifest.json);            SNAPSHOT_PATH=""public/data/snapshots/$module/latest.json""; No blanket ignores for public/data or mirrors;          if grep -nE '^(public/data/|mirrors/)$' .gitignore; then; .gitignore contains blanket ignore for public/data/ or mirrors/"";","NONE","NONE","scripts/ci/verify-artifacts.mjs;scripts/ci/assert-mission-control-gate.mjs;scripts/ci/check-elliott-parity.mjs;scripts/ci/forbid-kv-writes-in-api.sh;scripts/eod/check-eod-artifacts.mjs;scripts/ops/validate-truth.sh;"
ci-policy,"      - 'mirrors/forecast/**';","NONE","NONE","scripts/forecast/validate_policy.mjs;"
cleanup-daily-snapshots,"          if git diff --quiet public/data; then;            git diff --stat public/data;          git add public/data;","NONE","NONE","NONE"
e2e-playwright,"NONE","NONE","NONE","NONE"
eod-history-refresh,"          UNIVERSE_FILE=""./public/data/universe/all.json"";             UNIVERSE_FILE=""./public/data/universe/nasdaq100.json"";          git add public/data/eod/bars;","EODHD_API_KEY;","NONE","scripts/providers/eodhd-backfill-bars.mjs;"
eod-latest," node scripts/eod/build-eod-latest.mjs --universe ""$RV_UNIVERSE"" --chunk-size 500 --out public/data;          git add public/data/eod public/data/pipeline public/data/ops public/data/ops-daily.json docs/architecture/data-layout-law-v1.md;","GITHUB_TOKEN;TIIANGO_API_KEY;TIINGO_API_KEY;","NONE","scripts/ops/preflight-check.mjs;scripts/eod/build-eod-latest.mjs;scripts/ops/build-safety-snapshot.mjs;scripts/ops/build-mission-control-summary.mjs;scripts/ops/build-ops-pulse.mjs;scripts/ops/validate-ops-summary.mjs;scripts/ci/assert-mission-control-gate.mjs;"
forecast-daily,"          git add mirrors/forecast/ledger/ || true;          git add mirrors/forecast/snapshots/ || true;          git add public/data/forecast/ || true;","NONE","NONE","scripts/forecast/run_daily.mjs;"
forecast-monthly,"          git add public/data/forecast/reports/monthly/ || true;","NONE","NONE","scripts/forecast/run_monthly.mjs;"
forecast-rollback,"          cat > public/data/forecast/system/status.json << EOF;            git checkout ${{ inputs.target_commit }} -- public/data/forecast/latest.json || echo ""Could not restore latest.json"";          git add public/data/forecast;","NONE","NONE","NONE"
forecast-weekly,"          git add mirrors/forecast/challengers/ || true;          git add mirrors/forecast/champion/ || true;          git add mirrors/forecast/ledger/promotions/ || true;          git add public/data/forecast/ || true;","NONE","NONE","scripts/forecast/run_weekly.mjs;"
monitor-prod,"          fetch_json ""$BASE_URL/data/snapshots/market-prices/latest.json"" /tmp/market_prices.json;          fetch_json ""$BASE_URL/data/forecast/latest.json"" /tmp/forecast_latest.json;          fetch_json ""$BASE_URL/data/forecast/system/status.json"" /tmp/forecast_status.json;          fetch_json ""$BASE_URL/data/marketphase/index.json"" /tmp/marketphase_index.json;          fetch_json ""$BASE_URL/data/ops/pulse.json"" /tmp/ops_pulse.json;          echo ""✅ /data/ops/pulse semantic checks passed"";          curl -fsS ""$BASE_URL/data/ops/pulse.json"" -o /tmp/ops_pulse.json;          curl -sS ""$BASE_URL/data/forecast/latest.json"" -o /tmp/forecast_latest.json;","NONE","NONE","NONE"
ops-auto-alerts,"NONE","NONE","NONE","NONE"
ops-daily,"          git add public/data/pipeline/*.json public/data/ops public/data/ops-daily.json;","CF_ACCOUNT_ID;CF_API_TOKEN;GITHUB_TOKEN;","NONE","scripts/ops/preflight-check.mjs;scripts/pipeline/build-marketphase-from-kv.mjs;scripts/pipeline/build-ndx100-pipeline-truth.mjs;scripts/ops/build-safety-snapshot.mjs;scripts/ops/build-ops-daily.mjs;scripts/ops/build-mission-control-summary.mjs;scripts/ops/build-ops-pulse.mjs;scripts/ops/validate-ops-summary.mjs;scripts/ci/assert-mission-control-gate.mjs;"
refresh-health-assets,"          if git diff --quiet public/data; then;          git add public/data/system-health.json public/data/blocks/health.latest.json public/data/snapshots/health.json public/data/snapshots/health/latest.json;","GITHUB_TOKEN;","NONE","scripts/refresh-health-assets.mjs;"
scheduler-kick,"NONE","RV_ADMIN_TOKEN;","NONE","NONE"
universe-refresh,"          ls -la public/data/universe/;          for f in public/data/universe/*.json; do;          git add public/data/universe/;","EODHD_API_KEY;","NONE","scripts/universe/fetch-constituents.mjs;"
v3-finalizer,"            path=""public/data/snapshots/${module}/latest.json"";          if git diff --quiet public/data; then;            git diff --stat public/data;          git add public/data/snapshots 2>/dev/null || echo ""No snapshot files to add"";          git add public/data/state/modules/*.json 2>/dev/null || echo ""No module state files to add"";          git add public/data/manifest.json 2>/dev/null || echo ""No manifest to add"";          git add public/data/provider-state.json 2>/dev/null || echo ""No provider-state to add"";          if [ -f public/data/manifest.json ]; then;","GITHUB_TOKEN;","NONE","scripts/aggregator/finalize.mjs;scripts/wp16/guard-market-prices.mjs;"
v3-scrape-template,"            const registry = require('./public/data/registry/modules.json');;","ALPHAVANTAGE_API_KEY;FINNHUB_API_KEY;FMP_API_KEY;FRED_API_KEY;POLYGON_API_KEY;TWELVEDATA_API_KEY;","NONE","scripts/providers/market-prices-v3.mjs;scripts/providers/market-stats-v3.mjs;scripts/aggregator/finalize.mjs;"
wp16-manual-market-prices,"          git add public/data/snapshots/market-prices/latest.json public/data/snapshots/market-prices/ || true;          git add public/data/snapshots public/data/state/modules/*.json public/data/manifest.json public/data/provider-state.json 2>/dev/null || true;","GITHUB_TOKEN;","NONE","scripts/providers/market-prices-v3.mjs;scripts/aggregator/finalize.mjs;scripts/wp16/guard-market-prices.mjs;"
