<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>RubikVault ‚Äì Markets Decoded</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="description" content="RubikVault: Data-driven market intelligence. No noise, just signal. Stocks, Crypto, Macro." />
  <meta name="theme-color" content="#050814" />
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json" />
  
  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />
  
  <!-- External Libs (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
</head>
<body>

  <!-- HEADER -->
  <header class="rv-header">
    <div class="rv-header-left">
        <a href="index.html" class="rv-logo">
          <div class="rv-logo-mark" aria-hidden="true">
            <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="rv-vault-door-5" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#111827" />
                  <stop offset="100%" stop-color="#020617" />
                </linearGradient>
                <radialGradient id="rv-vault-glow-5" cx="50%" cy="50%" r="60%">
                  <stop offset="0%" stop-color="#38bdf8" stop-opacity="0.9" />
                  <stop offset="100%" stop-color="#1d4ed8" stop-opacity="0" />
                </radialGradient>
              </defs>
              <rect x="80" y="80" width="352" height="352" rx="48" fill="url(#rv-vault-door-5)" stroke="#1f2937" stroke-width="8" />
              <circle cx="120" cy="120" r="8" fill="#64748b" />
              <circle cx="392" cy="120" r="8" fill="#64748b" />
              <circle cx="120" cy="392" r="8" fill="#64748b" />
              <circle cx="392" cy="392" r="8" fill="#64748b" />
              <circle cx="256" cy="256" r="130" fill="none" stroke="url(#rv-vault-glow-5)" stroke-width="14" />
              <g transform="translate(186,186)">
                <rect x="0"  y="0" width="40" height="40" rx="6" fill="#f97316" />
                <rect x="44" y="0" width="40" height="40" rx="6" fill="#0ea5e9" />
                <rect x="88" y="0" width="40" height="40" rx="6" fill="#22c55e" />
                <rect x="0"  y="44" width="40" height="40" rx="6" fill="#facc15" />
                <rect x="44" y="44" width="40" height="40" rx="6" fill="#ef4444" />
                <rect x="88" y="44" width="40" height="40" rx="6" fill="#6366f1" />
                <rect x="0"  y="88" width="40" height="40" rx="6" fill="#22c55e" />
                <rect x="44" y="88" width="40" height="40" rx="6" fill="#0ea5e9" />
                <rect x="88" y="88" width="40" height="40" rx="6" fill="#f97316" />
              </g>
            </svg>
          </div>
          <div class="rv-logo-text">RubikVault</div>
        </a>
        
        <nav class="rv-nav-socials">
          <a href="https://www.youtube.com/@RubikVault" target="_blank" title="YouTube" aria-label="YouTube">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
          </a>
          <a href="https://x.com/RubikVault" target="_blank" title="X" aria-label="X Twitter">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg>
          </a>
          <a href="https://www.tiktok.com/@rubikvault" target="_blank" title="TikTok" aria-label="TikTok">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12.525.02c1.31-.02 2.61-.01 3.918.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93v6.16c0 2.52-1.12 4.89-2.93 6.61-1.82 1.73-4.27 2.45-6.69 1.97-2.42-.48-4.64-1.92-5.85-4.06-1.21-2.15-1.21-4.79.02-6.93 1.23-2.14 3.45-3.57 5.87-4.04.71-.14 1.44-.2 2.16-.18v4.2c-.67.03-1.35.32-1.9.82-.55.5-1.04 1.2-1.32 1.96-.28.76-.28 1.6.02 2.36.29.76.78 1.45 1.33 1.95.56.5 1.24.79 1.91.82 1.05.04 2.06-.32 2.85-.96.79-.64 1.29-1.57 1.29-2.65V.02Z"/></svg>
          </a>
          <a href="https://www.instagram.com/rubikvault" target="_blank" title="Instagram" aria-label="Instagram">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"/></svg>
          </a>
        </nav>
    </div>

    <div class="rv-header-right">
        <div class="market-timer">
            <div class="market-timer-top">
                <span id="mt-dot" class="status-dot"></span>
                <span id="mt-status">US Market</span>
            </div>
            <div id="mt-time" class="market-timer-bottom">NYC: --:--</div>
        </div>
        <button id="theme-toggle" class="theme-switch" aria-label="Toggle Theme">‚òÄÔ∏è</button>
    </div>
  </header>

  <!-- HERO SECTION: VALUE PROP & PULSE -->
  <section class="rv-hero">
    <div class="rv-hero-content">
      <h1>Market Clarity in 3 Seconds.</h1>
      <p>Data-driven insights across Stocks, Crypto, and Macro. No noise, no hype.</p>
      <div class="rv-hero-meta">
        <span id="last-updated">Last update: --:--</span>
        <span class="rv-badge">Live Beta</span>
      </div>
    </div>
    
    <!-- D7. Daily Insight Box (Overnight Pulse) -->
    <div class="rv-hero-side">
      <div class="rv-card rv-insight-box">
        <div class="rv-card-header">
            <span class="rv-card-title">‚ö° Overnight Pulse</span>
            <button id="read-aloud-btn" class="rv-icon-btn" aria-label="Read Out Loud">üîä</button>
        </div>
        <p id="daily-insight-text">
          Loading market context...
        </p>
        <div class="rv-card-footer">
            <small>Read time: <span id="read-time">~45s</span></small>
        </div>
      </div>
    </div>
  </section>

  <!-- MAIN DASHBOARD (Sortable Grid) -->
  <main class="rv-main" id="dashboard-grid">
    
    <!-- D3. Market Consensus Score (MCS) -->
    <section class="rv-section" id="section-mcs" data-id="mcs">
        <div class="rv-section-header">
            <h2>Market Consensus Score (MCS)</h2>
            <span class="rv-drag-handle">‚ãÆ‚ãÆ</span>
        </div>
        <div class="rv-grid-mcs">
            <div class="rv-tv-box rv-gauge-box">
                <canvas id="mcs-chart"></canvas>
                <div class="rv-gauge-value" id="mcs-value">--</div>
                <div class="rv-gauge-label">Sentiment</div>
            </div>
            <div class="rv-mcs-context">
                <h3>What this means</h3>
                <p>The MCS aggregates news sentiment and volatility. Scores above 60 indicate greed/optimism, below 40 fear/pessimism.</p>
                <div class="rv-stat-row">
                    <span>Volatility (VIX)</span>
                    <span id="vix-value" class="rv-stat-val">--</span>
                </div>
            </div>
        </div>
    </section>

    <!-- D5. Watchlist -->
    <section class="rv-section" id="section-watchlist" data-id="watchlist">
        <div class="rv-section-header">
            <h2>My Watchlist</h2>
            <span class="rv-drag-handle">‚ãÆ‚ãÆ</span>
        </div>
        <div class="rv-tv-box rv-watchlist-box">
            <div class="rv-watchlist-input">
                <input type="text" id="wl-input" placeholder="Add Symbol (e.g. AAPL, BTC)..." />
                <button id="wl-add-btn">Add</button>
            </div>
            <div id="wl-container" class="rv-watchlist-grid">
                <!-- Items injected here -->
                <div class="rv-empty-state">Your watchlist is empty. Add up to 5 symbols.</div>
            </div>
        </div>
    </section>

    <!-- D4. Custom Charts (No TradingView here, simple Line Charts) -->
    <section class="rv-section" id="section-charts" data-id="charts">
        <div class="rv-section-header">
            <h2>Trend Analysis (30 Days)</h2>
            <span class="rv-drag-handle">‚ãÆ‚ãÆ</span>
        </div>
        <div class="grid-2">
            <div class="rv-tv-box rv-chart-box">
                <div class="rv-box-header">S&P 500 (SPY)</div>
                <canvas id="chart-spy"></canvas>
            </div>
            <div class="rv-tv-box rv-chart-box">
                <div class="rv-box-header">Bitcoin (BTC)</div>
                <canvas id="chart-btc"></canvas>
            </div>
        </div>
    </section>

    <!-- D1. News Feed (Advanced) -->
    <section class="rv-section" id="section-news" data-id="news">
        <div class="rv-section-header">
            <h2>Live Intelligence</h2>
            <div class="rv-controls">
                <button class="rv-filter-btn active" onclick="app.news.filter('all')">All</button>
                <button class="rv-filter-btn" onclick="app.news.filter('Finance')">Finance</button>
                <button class="rv-filter-btn" onclick="app.news.filter('Crypto')">Crypto</button>
                <span class="rv-drag-handle">‚ãÆ‚ãÆ</span>
            </div>
        </div>
        <div class="rv-news-container">
            <div class="rv-news-refresh">
                <span id="news-last-updated">Updated: Just now</span>
                <button id="news-refresh-btn">‚Üª</button>
            </div>
            <div id="rv-news-grid" class="rv-news-grid">
                <!-- News Cards injected here -->
            </div>
        </div>
    </section>

  </main>

  <footer class="rv-footer">
    <div class="rv-footer-links">
        <a href="imprint.html">Imprint</a>
        <a href="privacy.html">Privacy</a>
        <a href="disclaimer.html">Disclaimer</a>
    </div>
    <p>&copy; 2025 RubikVault. Data provided for educational purposes.</p>
  </footer>

  <script src="script.js"></script>
  
  <script>
      // PWA Registration
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('service-worker.js')
            .then(reg => console.log('SW registered'))
            .catch(err => console.log('SW failed', err));
        });
      }
  </script>
</body>
</html>