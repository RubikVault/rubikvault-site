<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>RubikVault – Decode the Markets</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="RubikVault – Market dashboards, live news, and watchlists." />

  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#050814" />

  <!-- External Libs -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.9/Sortable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.11/dist/purify.min.js"></script>
</head>
<body>

  <!-- HEADER -->
  <header class="rv-header">
    <div class="rv-header-left">
        <a href="index.html" class="rv-logo">
          <div class="rv-logo-mark" aria-hidden="true">
            <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="rv-vault-door-5" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" stop-color="#111827" />
                  <stop offset="100%" stop-color="#020617" />
                </linearGradient>
                <radialGradient id="rv-vault-glow-5" cx="50%" cy="50%" r="60%">
                  <stop offset="0%" stop-color="#38bdf8" stop-opacity="0.9" />
                  <stop offset="100%" stop-color="#1d4ed8" stop-opacity="0" />
                </radialGradient>
              </defs>
              <rect x="80" y="80" width="352" height="352" rx="48" fill="url(#rv-vault-door-5)" stroke="#1f2937" stroke-width="8" />
              <circle cx="120" cy="120" r="8" fill="#64748b" />
              <circle cx="392" cy="120" r="8" fill="#64748b" />
              <circle cx="120" cy="392" r="8" fill="#64748b" />
              <circle cx="392" cy="392" r="8" fill="#64748b" />
              <circle cx="256" cy="256" r="130" fill="none" stroke="url(#rv-vault-glow-5)" stroke-width="14" />
              <g transform="translate(186,186)">
                <rect x="0"  y="0" width="40" height="40" rx="6" fill="#f97316" />
                <rect x="44" y="0" width="40" height="40" rx="6" fill="#0ea5e9" />
                <rect x="88" y="0" width="40" height="40" rx="6" fill="#22c55e" />
                <rect x="0"  y="44" width="40" height="40" rx="6" fill="#facc15" />
                <rect x="44" y="44" width="40" height="40" rx="6" fill="#ef4444" />
                <rect x="88" y="44" width="40" height="40" rx="6" fill="#6366f1" />
                <rect x="0"  y="88" width="40" height="40" rx="6" fill="#22c55e" />
                <rect x="44" y="88" width="40" height="40" rx="6" fill="#0ea5e9" />
                <rect x="88" y="88" width="40" height="40" rx="6" fill="#f97316" />
              </g>
            </svg>
          </div>
          <div class="rv-logo-text">RubikVault</div>
        </a>

        <nav class="rv-nav-socials">
          <a href="https://www.youtube.com/@RubikVault" target="_blank" rel="noopener noreferrer" title="YouTube">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
          </a>
          <a href="https://x.com/RubikVault" target="_blank" rel="noopener noreferrer" title="X">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg>
          </a>
          <a href="https://www.tiktok.com/@rubikvault" target="_blank" rel="noopener noreferrer" title="TikTok">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12.525.02c1.31-.02 2.61-.01 3.918.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93v6.16c0 2.52-1.12 4.89-2.93 6.61-1.82 1.73-4.27 2.45-6.69 1.97-2.42-.48-4.64-1.92-5.85-4.06-1.21-2.15-1.21-4.79.02-6.93 1.23-2.14 3.45-3.57 5.87-4.04.71-.14 1.44-.2 2.16-.18v4.2c-.67.03-1.35.32-1.9.82-.55.5-1.04 1.2-1.32 1.96-.28.76-.28 1.6.02 2.36.29.76.78 1.45 1.33 1.95.56.5 1.24.79 1.91.82 1.05.04 2.06-.32 2.85-.96.79-.64 1.29-1.57 1.29-2.65V.02Z"/></svg>
          </a>
          <a href="https://www.instagram.com/rubikvault" target="_blank" rel="noopener noreferrer" title="Instagram">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M7.8,2H16.2C19.4,2 22,4.6 22,7.8V16.2A5.8,5.8 0 0,1 16.2,22H7.8C4.6,22 2,19.4 2,16.2V7.8A5.8,5.8 0 0,1 7.8,2M7.6,4A3.6,3.6 0 0,0 4,7.6V16.4C4,18.39 5.61,20 7.6,20H16.4A3.6,3.6 0 0,0 20,16.4V7.6C20,5.61 18.39,4 16.4,4H7.6M17.25,5.5A1.25,1.25 0 0,1 18.5,6.75A1.25,1.25 0 0,1 17.25,8A1.25,1.25 0 0,1 16,6.75A1.25,1.25 0 0,1 17.25,5.5M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9Z"/></svg>
          </a>
        </nav>
    </div>

    <div class="rv-header-right">
        <div class="market-timer">
            <div class="market-timer-top">
                <span id="mt-dot" class="status-dot"></span>
                <span id="mt-status">Loading...</span>
            </div>
            <div id="mt-time" class="market-timer-bottom">NYC: --:--</div>
        </div>
        <button id="theme-toggle" class="theme-switch" aria-label="Toggle theme">☀️</button>
    </div>
  </header>

  <main class="rv-main" id="rv-main-grid">

    <!-- OPTION A -->
    <section class="rv-section" id="section-option-a">
        <div class="test-label">Option A: Intraday Performance (Live)</div>
        <div class="grid-4">
            <div class="rv-tv-box" style="height: 220px;">
                <div class="tradingview-widget-container">
                  <div class="tradingview-widget-container__widget"></div>
                  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                  { "symbol": "FOREXCOM:DJI", "width": "100%", "height": "100%", "locale": "en", "dateRange": "1D", "colorTheme": "dark", "isTransparent": true, "autosize": true, "largeChartUrl": "" }
                  </script>
                </div>
            </div>
            <div class="rv-tv-box" style="height: 220px;">
                <div class="tradingview-widget-container">
                  <div class="tradingview-widget-container__widget"></div>
                  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                  { "symbol": "FOREXCOM:NSXUSD", "width": "100%", "height": "100%", "locale": "en", "dateRange": "1D", "colorTheme": "dark", "isTransparent": true, "autosize": true, "largeChartUrl": "" }
                  </script>
                </div>
            </div>
            <div class="rv-tv-box" style="height: 220px;">
                <div class="tradingview-widget-container">
                  <div class="tradingview-widget-container__widget"></div>
                  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                  { "symbol": "FOREXCOM:SPXUSD", "width": "100%", "height": "100%", "locale": "en", "dateRange": "1D", "colorTheme": "dark", "isTransparent": true, "autosize": true, "largeChartUrl": "" }
                  </script>
                </div>
            </div>
            <div class="rv-tv-box" style="height: 220px;">
                <div class="tradingview-widget-container">
                  <div class="tradingview-widget-container__widget"></div>
                  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-mini-symbol-overview.js" async>
                  { "symbol": "BLACKBULL:US2000", "width": "100%", "height": "100%", "locale": "en", "dateRange": "1D", "colorTheme": "dark", "isTransparent": true, "autosize": true, "largeChartUrl": "" }
                  </script>
                </div>
            </div>
        </div>
    </section>

    <!-- PERSONAL DASHBOARD -->
    <div class="rv-dashboard-grid" style="margin-bottom:60px;" id="section-personal">
        <div class="rv-dash-sidebar">
            <div class="test-label">Market Consensus Score</div>
            <div class="rv-tv-box rv-gauge-box">
                <canvas id="mcs-chart"></canvas>
                <div class="rv-gauge-value" id="mcs-value">—</div>
                <div class="rv-gauge-label">Sentiment</div>
            </div>
            <div class="rv-mcs-context">
                <small id="mcs-context-text">Waiting for live news sentiment...</small>
            </div>
        </div>

        <div class="rv-dash-main">
            <div class="test-label">My Watchlist (Live Quotes)</div>
            <div class="rv-tv-box rv-watchlist-box">
                <div class="rv-watchlist-input-group">
                    <input type="text" id="wl-input" placeholder="Symbol (e.g. AAPL)..." autocomplete="off" />
                    <div id="wl-suggestions" class="rv-suggestions"></div>
                    <button id="wl-add-btn">Add</button>
                </div>
                <div id="wl-container" class="rv-watchlist-grid"></div>
            </div>
        </div>
    </div>

    <!-- OPTION B -->
    <section class="rv-section" id="section-option-b">
        <div class="test-label">Option B: Global Market Overview</div>
        <div class="rv-tv-box" style="height: 500px;">
            <div class="tradingview-widget-container">
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
                {
                  "colorTheme": "dark", "dateRange": "12M", "showChart": true, "locale": "en", "width": "100%", "height": "100%", "isTransparent": true,
                  "tabs": [
                    { "title": "USA", "symbols": [ { "s": "FOREXCOM:SPXUSD" }, { "s": "FOREXCOM:NSXUSD" }, { "s": "FOREXCOM:DJI" }, { "s": "BLACKBULL:US2000" } ] },
                    { "title": "Europe", "symbols": [ { "s": "INDEX:DEU40", "d": "DAX 40" }, { "s": "INDEX:UK100", "d": "FTSE 100" }, { "s": "INDEX:FRA40", "d": "CAC 40" } ] },
                    { "title": "Asia", "symbols": [ { "s": "INDEX:N225", "d": "Nikkei 225" }, { "s": "HSI:HSI", "d": "Hang Seng" }, { "s": "TVC:SHCOMP", "d": "Shanghai Comp" } ] },
                    { "title": "Commodities", "symbols": [ { "s": "CME_MINI:ES1!" }, { "s": "TVC:USOIL" }, { "s": "TVC:GOLD" } ] }
                  ]
                }
                </script>
            </div>
        </div>
    </section>

    <!-- OPTION J: LIVE NEWS -->
    <div class="rv-dashboard-grid" id="section-news">
        <div class="rv-dash-main">
            <div class="test-label">Option J: Chart Context</div>
            <div class="rv-tv-box" style="height: 600px;">
                <div class="tradingview-widget-container">
                    <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                    { "width": "100%", "height": "100%", "symbol": "NASDAQ:QQQ", "interval": "D", "timezone": "America/New_York", "theme": "dark", "style": "1", "locale": "en", "enable_publishing": false, "allow_symbol_change": true, "calendar": false, "support_host": "https://www.tradingview.com" }
                    </script>
                </div>
            </div>
        </div>

        <div class="rv-dash-sidebar">
            <div class="test-label">Option J: Live Market News (Real-Time)</div>
            <div class="rv-tv-box" style="height: 600px; padding:0; overflow-y: hidden; display:flex; flex-direction:column;">
                <div class="rv-news-header">
                    <span style="font-size:11px; color:var(--rv-text-muted);">Source: RubikVault API</span>
                    <button onclick="initNewsFeed()" class="rv-refresh-btn">↻ Refresh</button>
                </div>
                <div id="rv-news-feed-list" class="rv-news-list-container" style="overflow-y:auto; flex:1;"></div>
            </div>
        </div>
    </div>

  </main>

  <footer class="rv-footer">
    <div class="rv-footer-links">
        <a href="imprint.html">Imprint</a>
        <a href="privacy.html">Privacy</a>
        <a href="disclaimer.html">Disclaimer</a>
    </div>
    &copy; 2025 RubikVault.
  </footer>

  <script src="script.js" defer></script>
</body>
</html>