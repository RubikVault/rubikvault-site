# 07_PR

## Title
`fix(ops): never-empty-deploy gates + forecast last_good hardening`

## What changed
- Added CI critical artifact gate via `scripts/ci/verify-artifacts.mjs` and wired into `ci-gates.yml` (`Verify critical published artifacts`).
- Added `.gitignore` blanket-ignore guard in CI (`repo-policies`) and removed blanket ignore behavior for `mirrors/` + `public/data/`.
- Hardened forecast publish path with atomic writes and last_good fallback:
  - `scripts/forecast/report_generator.mjs` now validates/atomically writes latest and persists `last_good` envelope + pointer.
  - `scripts/forecast/run_daily.mjs` now publishes from `last_good` on quality gate fail.
  - `scripts/forecast/circuit_breaker.mjs` now uses fallback publish helper.
- Added production monitor workflow: `.github/workflows/monitor-prod.yml` (2x daily + manual) for liveness and 48h staleness warning.
- Added bootstrap presence artifacts:
  - `public/data/snapshots/market-prices/latest.json`
  - `public/data/forecast/last_good.json`
  - `public/data/forecast/system/last_good.json`

## Why (SEV-1 prevention)
- Prevent deployments that ship missing critical JSON artifacts (`404` risk).
- Ensure forecast UI has a stable fallback contract even when data-quality gates open circuit.
- Detect production regressions automatically via scheduled liveness checks.

## How verified
- Local:
  - `node scripts/ci/verify-artifacts.mjs` => PASS
  - `ruby -e 'require "yaml"; YAML.load_file(".github/workflows/ci-gates.yml"); YAML.load_file(".github/workflows/monitor-prod.yml")'` => PASS
  - `npm run test:market-prices-artifact` => PASS
  - Headless UI probe (`http://localhost:8788/forecast`) => `bootstrap_text` shows explicit circuit-open reason with `0 stocks`.
- Live probes:
  - Preview: `https://dece36c6.rubikvault-site.pages.dev/...`
  - Production: `https://rubikvault.com/...`
  - Evidence recorded in `Report/HARDENING_2026-02-08/02_LIVE_PROBE.md`.
