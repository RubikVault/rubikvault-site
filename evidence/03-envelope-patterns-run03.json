[
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "src/lib/freshness.ts"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/freshness.ts"
      },
      "lines": {
        "text": "import type { MetaStatus } from \"./envelope\";\n"
      },
      "line_number": 1,
      "absolute_offset": 0,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 35,
          "end": 43
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "src/lib/freshness.ts"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 19916,
          "human": "0.000020s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 2118,
        "bytes_printed": 300,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "src/lib/rv-envelope.ts"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/rv-envelope.ts"
      },
      "lines": {
        "text": "export type RVEnvelope<T> = { meta: RVMeta; data: { value: RVValue<T> } };\n"
      },
      "line_number": 28,
      "absolute_offset": 738,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 30,
          "end": 35
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/rv-envelope.ts"
      },
      "lines": {
        "text": "  return { meta: { status: \"OK\", isStale: false, generatedAt: nowIso(), source, warnings: [], debug },\n"
      },
      "line_number": 33,
      "absolute_offset": 973,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 11,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/rv-envelope.ts"
      },
      "lines": {
        "text": "  return { meta: { status: \"STALE\", isStale: true, generatedAt: nowIso(), source, reason, stalenessSec,\n"
      },
      "line_number": 38,
      "absolute_offset": 1280,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 11,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/rv-envelope.ts"
      },
      "lines": {
        "text": "  return { meta: { status: \"NO_DATA\", isStale: true, generatedAt: nowIso(), source, reason,\n"
      },
      "line_number": 44,
      "absolute_offset": 1673,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 11,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/rv-envelope.ts"
      },
      "lines": {
        "text": "  return { meta: { status: \"ERROR\", isStale: true, generatedAt: nowIso(), source, reason,\n"
      },
      "line_number": 50,
      "absolute_offset": 2044,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 11,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "src/lib/rv-envelope.ts"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 8208,
          "human": "0.000008s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 2288,
        "bytes_printed": 1487,
        "matched_lines": 5,
        "matches": 5
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "src/lib/rv-last-good.ts"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/rv-last-good.ts"
      },
      "lines": {
        "text": "import { nowIso } from \"./rv-envelope\";\n"
      },
      "line_number": 1,
      "absolute_offset": 0,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 29,
          "end": 37
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "src/lib/rv-last-good.ts"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 3542,
          "human": "0.000004s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 672,
        "bytes_printed": 300,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/test-truth-chain.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-truth-chain.mjs"
      },
      "lines": {
        "text": "      meta: { status: 'ok', asOf: '2026-01-30T00:00:00.000Z' },\n"
      },
      "line_number": 35,
      "absolute_offset": 1154,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/test-truth-chain.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 6625,
          "human": "0.000007s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 6045,
        "bytes_printed": 332,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "lines": {
        "text": "  meta: EnvelopeMeta;\n"
      },
      "line_number": 24,
      "absolute_offset": 491,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 2,
          "end": 7
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "lines": {
        "text": "  assert(\"meta\" in obj && typeof obj.meta === \"object\" && obj.meta !== null, \"Envelope.meta missing\");\n"
      },
      "line_number": 50,
      "absolute_offset": 1210,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 37,
          "end": 43
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "lines": {
        "text": "  const meta = obj.meta as EnvelopeMeta;\n"
      },
      "line_number": 52,
      "absolute_offset": 1314,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "lines": {
        "text": "  const envelope: Envelope<T> = {\n"
      },
      "line_number": 73,
      "absolute_offset": 2525,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 77,
      "absolute_offset": 2614,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "lines": {
        "text": "  assertEnvelope(envelope);\n"
      },
      "line_number": 88,
      "absolute_offset": 2953,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 17,
          "end": 25
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "lines": {
        "text": "  return envelope;\n"
      },
      "line_number": 89,
      "absolute_offset": 2981,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "lines": {
        "text": "  const envelope: Envelope<null> = {\n"
      },
      "line_number": 100,
      "absolute_offset": 3303,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 108,
      "absolute_offset": 3470,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "lines": {
        "text": "  assertEnvelope(envelope);\n"
      },
      "line_number": 119,
      "absolute_offset": 3809,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 17,
          "end": 25
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "lines": {
        "text": "  return envelope;\n"
      },
      "line_number": 120,
      "absolute_offset": 3837,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "src/lib/envelope.ts"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 14083,
          "human": "0.000014s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 3858,
        "bytes_printed": 2494,
        "matched_lines": 11,
        "matches": 11
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/marketphase-validate.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-validate.mjs"
      },
      "lines": {
        "text": "function validateEnvelope(errors, payload, symbol) {\n"
      },
      "line_number": 34,
      "absolute_offset": 1001,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 9,
          "end": 25
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-validate.mjs"
      },
      "lines": {
        "text": "  const meta = payload.meta || {};\n"
      },
      "line_number": 46,
      "absolute_offset": 1392,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-validate.mjs"
      },
      "lines": {
        "text": "    validateEnvelope(errors, payload, symbol);\n"
      },
      "line_number": 146,
      "absolute_offset": 5686,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 4,
          "end": 20
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/marketphase-validate.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 8291,
          "human": "0.000008s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 6090,
        "bytes_printed": 833,
        "matched_lines": 3,
        "matches": 3
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "      return { meta: parsed.meta, raw: parsed.raw, envelope: parsed, isEnvelope: true };\n"
      },
      "line_number": 50,
      "absolute_offset": 1224,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 15,
          "end": 20
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 51,
          "end": 59
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "    return { raw: parsed, envelope: null, isEnvelope: false };\n"
      },
      "line_number": 52,
      "absolute_offset": 1319,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 26,
          "end": 34
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "    \"schemaVersion\",\n"
      },
      "line_number": 65,
      "absolute_offset": 1691,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 5,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "  if (data.schemaVersion && !allowedSchemaVersions.has(data.schemaVersion)) {\n"
      },
      "line_number": 89,
      "absolute_offset": 2100,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 11,
          "end": 24
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 60,
          "end": 73
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "    errors.push(\"schemaVersion_invalid\");\n"
      },
      "line_number": 90,
      "absolute_offset": 2178,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 17,
          "end": 30
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "    ...(payload.meta && typeof payload.meta === \"object\" ? payload.meta : {}),\n"
      },
      "line_number": 158,
      "absolute_offset": 4497,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 39,
          "end": 45
        },
        {
          "match": {
            "text": "meta :"
          },
          "start": 67,
          "end": 73
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "  return { payload: { ...payload, meta: nextMeta }, changed };\n"
      },
      "line_number": 168,
      "absolute_offset": 4803,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 34,
          "end": 39
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "  const meta = payload.meta || {};\n"
      },
      "line_number": 174,
      "absolute_offset": 5025,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "  const metaInput = meta && typeof meta === \"object\" ? meta : {};\n"
      },
      "line_number": 186,
      "absolute_offset": 5498,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 35,
          "end": 41
        },
        {
          "match": {
            "text": "meta :"
          },
          "start": 55,
          "end": 61
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "  const envelopeInput = isMirrorEnvelope(data) ? data : { meta: {}, raw: data };\n"
      },
      "line_number": 224,
      "absolute_offset": 6742,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        },
        {
          "match": {
            "text": "meta:"
          },
          "start": 58,
          "end": 63
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "  const rawPayload = envelopeInput.raw && typeof envelopeInput.raw === \"object\" ? { ...envelopeInput.raw } : envelopeInput.raw;\n"
      },
      "line_number": 225,
      "absolute_offset": 6823,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 21,
          "end": 29
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 49,
          "end": 57
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 87,
          "end": 95
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 109,
          "end": 117
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "  const meta = normalizeEnvelopeMeta(normalized.payload, envelopeInput.meta, finalPath);\n"
      },
      "line_number": 232,
      "absolute_offset": 7269,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 57,
          "end": 65
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "  const envelope = { meta, raw: normalized.payload };\n"
      },
      "line_number": 233,
      "absolute_offset": 7358,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "  atomicWriteJson(finalPath, envelope);\n"
      },
      "line_number": 234,
      "absolute_offset": 7412,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 29,
          "end": 37
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "lines": {
        "text": "  return envelope;\n"
      },
      "line_number": 235,
      "absolute_offset": 7452,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-io.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 20083,
          "human": "0.000020s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 7730,
        "bytes_printed": 4454,
        "matched_lines": 15,
        "matches": 24
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "      printf \"%s\" \"$body\" | jq -e '(.ok==true) or (has(\"schema\")) or (has(\"schemaVersion\")) or (has(\"schema_version\") and has(\"metadata\"))' >/dev/null || fail \"debug-bundle missing ok/schema/schemaVersion/schema_version+metadata for $url\"\n"
      },
      "line_number": 38,
      "absolute_offset": 1106,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 75,
          "end": 88
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 191,
          "end": 204
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "      printf \"%s\" \"$body\" | grep -Eq '\"ok\"[[:space:]]*:[[:space:]]*true|\"schema\"|\\\"schemaVersion\\\"|\"schema_version\"|\"metadata\"' || fail \"debug-bundle missing ok/schema/schemaVersion/schema_version+metadata for $url\"\n"
      },
      "line_number": 40,
      "absolute_offset": 1354,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 83,
          "end": 96
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 168,
          "end": 181
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "        if (has(\"ok\") and ((has(\"meta\")) or (has(\"schemaVersion\")))) then\n"
      },
      "line_number": 45,
      "absolute_offset": 1664,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 50,
          "end": 63
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "        elif (((.schemaVersion? == \"v3\") or (has(\"blockId\"))) and (has(\"meta\")) and (has(\"data\"))) then\n"
      },
      "line_number": 49,
      "absolute_offset": 1879,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 17,
          "end": 30
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "        printf \"%s\" \"$body\" | jq -e 'has(\"ok\")' >/dev/null || fail \"legacy envelope missing .ok for $url\"\n"
      },
      "line_number": 57,
      "absolute_offset": 2119,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 75,
          "end": 83
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "        printf \"%s\" \"$body\" | jq -e 'has(\"meta\") or has(\"schemaVersion\")' >/dev/null || fail \"legacy envelope missing meta/schemaVersion for $url\"\n"
      },
      "line_number": 58,
      "absolute_offset": 2225,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 57,
          "end": 70
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 101,
          "end": 109
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 123,
          "end": 136
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "        printf \"%s\" \"$body\" | jq -e '(has(\"schemaVersion\") and has(\"blockId\") and has(\"meta\") and has(\"data\"))' >/dev/null || fail \"v3-flat missing schemaVersion/blockId/meta/data for $url\"\n"
      },
      "line_number": 62,
      "absolute_offset": 2668,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 43,
          "end": 56
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 148,
          "end": 161
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "      # - legacy: has \"ok\" and (\"meta\" or \"schemaVersion\")\n"
      },
      "line_number": 68,
      "absolute_offset": 2972,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 43,
          "end": 56
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "      # - v3-flat: has \"schemaVersion\":\"v3\" or \"blockId\" plus \"meta\" and \"data\"\n"
      },
      "line_number": 69,
      "absolute_offset": 3031,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 24,
          "end": 37
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "      elif printf \"%s\" \"$body\" | grep -Eq '\"schemaVersion\"[[:space:]]*:[[:space:]]*\"v3\"|\"blockId\"[[:space:]]*:'; then\n"
      },
      "line_number": 74,
      "absolute_offset": 3523,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 44,
          "end": 57
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "        printf \"%s\" \"$body\" | grep -Eq '\"schemaVersion\"[[:space:]]*:' || fail \"v3-flat missing schemaVersion for $url\"\n"
      },
      "line_number": 75,
      "absolute_offset": 3641,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 41,
          "end": 54
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 95,
          "end": 108
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "lines": {
        "text": "        printf \"%s\" \"$body\" | grep -Eq '\"meta\"[[:space:]]*:|\"schemaVersion\"[[:space:]]*:' || fail \"legacy missing meta/schemaVersion for $url\"\n"
      },
      "line_number": 81,
      "absolute_offset": 4176,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 61,
          "end": 74
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 119,
          "end": 132
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/test-api.sh"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 16583,
          "human": "0.000017s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 4356,
        "bytes_printed": 4509,
        "matched_lines": 12,
        "matches": 19
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/diag.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/diag.js"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 22,
      "absolute_offset": 634,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/diag.js"
      },
      "lines": {
        "text": "      schemaVersion: \"v1\",\n"
      },
      "line_number": 33,
      "absolute_offset": 868,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 6,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/diag.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 6208,
          "human": "0.000006s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 1149,
        "bytes_printed": 491,
        "matched_lines": 2,
        "matches": 2
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/validate-snapshots.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-snapshots.js"
      },
      "lines": {
        "text": "  const meta = payload?.meta;\n"
      },
      "line_number": 27,
      "absolute_offset": 632,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-snapshots.js"
      },
      "lines": {
        "text": "  assert(meta && typeof meta === \"object\", `${filePath}: meta missing`, errors);\n"
      },
      "line_number": 28,
      "absolute_offset": 662,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 24,
          "end": 30
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/validate-snapshots.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 5958,
          "human": "0.000006s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 2511,
        "bytes_printed": 580,
        "matched_lines": 2,
        "matches": 2
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-builders.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-builders.mjs"
      },
      "lines": {
        "text": "    schemaVersion: \"rv-mirror-v1\",\n"
      },
      "line_number": 6,
      "absolute_offset": 304,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-builders.mjs"
      },
      "lines": {
        "text": "    schemaVersion: \"1.0\",\n"
      },
      "line_number": 34,
      "absolute_offset": 1091,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-builders.mjs"
      },
      "lines": {
        "text": "    schemaVersion: \"1.0\",\n"
      },
      "line_number": 49,
      "absolute_offset": 1421,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/utils/mirror-builders.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 4542,
          "human": "0.000005s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 1646,
        "bytes_printed": 793,
        "matched_lines": 3,
        "matches": 3
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/refresh-health-assets.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/refresh-health-assets.mjs"
      },
      "lines": {
        "text": "import { buildEnvelope, createValidator, loadSnapshotEnvelopeSchema } from \"./lib/envelope-builder.mjs\";\n"
      },
      "line_number": 3,
      "absolute_offset": 72,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 82,
          "end": 90
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/refresh-health-assets.mjs"
      },
      "lines": {
        "text": "  base.schemaVersion = base.schemaVersion || \"v3\";\n"
      },
      "line_number": 85,
      "absolute_offset": 2896,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 7,
          "end": 20
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 28,
          "end": 41
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/refresh-health-assets.mjs"
      },
      "lines": {
        "text": "  base.meta = {\n"
      },
      "line_number": 90,
      "absolute_offset": 3067,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 7,
          "end": 13
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/refresh-health-assets.mjs"
      },
      "lines": {
        "text": "    ...(base.meta && typeof base.meta === \"object\" ? base.meta : {}),\n"
      },
      "line_number": 91,
      "absolute_offset": 3083,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 33,
          "end": 39
        },
        {
          "match": {
            "text": "meta :"
          },
          "start": 58,
          "end": 64
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/refresh-health-assets.mjs"
      },
      "lines": {
        "text": "  const envelope = buildEnvelope(schema, {\n"
      },
      "line_number": 178,
      "absolute_offset": 5603,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/refresh-health-assets.mjs"
      },
      "lines": {
        "text": "  if (!validate(envelope)) {\n"
      },
      "line_number": 197,
      "absolute_offset": 6090,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 16,
          "end": 24
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/refresh-health-assets.mjs"
      },
      "lines": {
        "text": "    console.error(\"Health snapshot envelope validation failed\");\n"
      },
      "line_number": 198,
      "absolute_offset": 6119,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 35,
          "end": 43
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/refresh-health-assets.mjs"
      },
      "lines": {
        "text": "  await writeJson(healthDirLatestPath, envelope);\n"
      },
      "line_number": 203,
      "absolute_offset": 6293,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 39,
          "end": 47
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/refresh-health-assets.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 10000,
          "human": "0.000010s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 7195,
        "bytes_printed": 2249,
        "matched_lines": 8,
        "matches": 10
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/seeder.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/seeder.js"
      },
      "lines": {
        "text": "    schemaVersion: \"v1\",\n"
      },
      "line_number": 258,
      "absolute_offset": 7524,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/seeder.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 263,
      "absolute_offset": 7664,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/seeder.js"
      },
      "lines": {
        "text": "  const meta = snapshot?.meta;\n"
      },
      "line_number": 308,
      "absolute_offset": 9145,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/seeder.js"
      },
      "lines": {
        "text": "    schemaVersion: \"v1\",\n"
      },
      "line_number": 1104,
      "absolute_offset": 38458,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/seeder.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 15667,
          "human": "0.000016s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 46885,
        "bytes_printed": 917,
        "matched_lines": 4,
        "matches": 4
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/debug-matrix.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/debug-matrix.js"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 21,
      "absolute_offset": 597,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/debug-matrix.js"
      },
      "lines": {
        "text": "      schemaVersion: \"v1\",\n"
      },
      "line_number": 32,
      "absolute_offset": 826,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 6,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/debug-matrix.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 4417,
          "human": "0.000004s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 1115,
        "bytes_printed": 515,
        "matched_lines": 2,
        "matches": 2
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/debug-bundle.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/debug-bundle.js"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 21,
      "absolute_offset": 596,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/debug-bundle.js"
      },
      "lines": {
        "text": "      schemaVersion: \"v1\",\n"
      },
      "line_number": 32,
      "absolute_offset": 825,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 6,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/debug-bundle.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 3458,
          "human": "0.000003s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 1114,
        "bytes_printed": 515,
        "matched_lines": 2,
        "matches": 2
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/metrics-v5-gates.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/metrics-v5-gates.mjs"
      },
      "lines": {
        "text": "function validateEnvelope(payload, catalog) {\n"
      },
      "line_number": 36,
      "absolute_offset": 1112,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 9,
          "end": 25
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/metrics-v5-gates.mjs"
      },
      "lines": {
        "text": "  assert(payload.meta && typeof payload.meta === \"object\", \"meta missing\");\n"
      },
      "line_number": 38,
      "absolute_offset": 1228,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 40,
          "end": 46
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/metrics-v5-gates.mjs"
      },
      "lines": {
        "text": "  const meta = payload.meta;\n"
      },
      "line_number": 42,
      "absolute_offset": 1405,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/metrics-v5-gates.mjs"
      },
      "lines": {
        "text": "  validateEnvelope(payload, catalog);\n"
      },
      "line_number": 92,
      "absolute_offset": 3860,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 2,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/metrics-v5-gates.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 7500,
          "human": "0.000008s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 4441,
        "bytes_printed": 1071,
        "matched_lines": 4,
        "matches": 4
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/_lib/with-meta.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/_lib/with-meta.mjs"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 4,
      "absolute_offset": 95,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/_lib/with-meta.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 3417,
          "human": "0.000003s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 498,
        "bytes_printed": 272,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/mission-control/summary.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/mission-control/summary.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 72,
      "absolute_offset": 2143,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/mission-control/summary.js"
      },
      "lines": {
        "text": "      meta: json?.meta || null\n"
      },
      "line_number": 151,
      "absolute_offset": 4306,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/mission-control/summary.js"
      },
      "lines": {
        "text": "      meta: null,\n"
      },
      "line_number": 160,
      "absolute_offset": 4513,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/mission-control/summary.js"
      },
      "lines": {
        "text": "    const envelopeOk = sample.response?.ok === true;\n"
      },
      "line_number": 500,
      "absolute_offset": 17468,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 10,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/mission-control/summary.js"
      },
      "lines": {
        "text": "    if (!envelopeOk) typeErrors.push('envelope_ok');\n"
      },
      "line_number": 501,
      "absolute_offset": 17521,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 38,
          "end": 46
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/mission-control/summary.js"
      },
      "lines": {
        "text": "  let reason = 'CONTRACT_FAIL';\n"
      },
      "line_number": 603,
      "absolute_offset": 21749,
      "submatches": [
        {
          "match": {
            "text": "CONTRACT_FAIL"
          },
          "start": 16,
          "end": 29
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/mission-control/summary.js"
      },
      "lines": {
        "text": "    const meta = snap?.metadata || {};\n"
      },
      "line_number": 1351,
      "absolute_offset": 52905,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 10,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/mission-control/summary.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 1600,
      "absolute_offset": 62008,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/mission-control/summary.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 27209,
          "human": "0.000027s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 64968,
        "bytes_printed": 2071,
        "matched_lines": 8,
        "matches": 9
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/_lib/contracts/envelope.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/_lib/contracts/envelope.js"
      },
      "lines": {
        "text": "  const base = meta && typeof meta === \"object\" ? { ...meta } : {};\n"
      },
      "line_number": 4,
      "absolute_offset": 80,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 30,
          "end": 36
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/_lib/contracts/envelope.js"
      },
      "lines": {
        "text": "    meta: safeMeta,\n"
      },
      "line_number": 35,
      "absolute_offset": 923,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/_lib/contracts/envelope.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 4375,
          "human": "0.000004s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 991,
        "bytes_printed": 568,
        "matched_lines": 2,
        "matches": 2
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/_middleware.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_middleware.js"
      },
      "lines": {
        "text": "import { ensureEnvelopeResponse, errorEnvelope } from \"./_shared/envelope.js\";\n"
      },
      "line_number": 2,
      "absolute_offset": 60,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 65,
          "end": 73
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_middleware.js"
      },
      "lines": {
        "text": "    // Return error envelope for thrown exceptions - never leak stack traces\n"
      },
      "line_number": 14,
      "absolute_offset": 355,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 20,
          "end": 28
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_middleware.js"
      },
      "lines": {
        "text": "    const envelope = errorEnvelope(\n"
      },
      "line_number": 16,
      "absolute_offset": 492,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 10,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_middleware.js"
      },
      "lines": {
        "text": "    return new Response(JSON.stringify(envelope), {\n"
      },
      "line_number": 21,
      "absolute_offset": 643,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 39,
          "end": 47
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_middleware.js"
      },
      "lines": {
        "text": "      // Static fallback also 404 - return proper error envelope\n"
      },
      "line_number": 31,
      "absolute_offset": 1032,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 56,
          "end": 64
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_middleware.js"
      },
      "lines": {
        "text": "      const envelope = errorEnvelope(\n"
      },
      "line_number": 33,
      "absolute_offset": 1159,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 12,
          "end": 20
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_middleware.js"
      },
      "lines": {
        "text": "      return new Response(JSON.stringify(envelope), {\n"
      },
      "line_number": 38,
      "absolute_offset": 1320,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 41,
          "end": 49
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/_middleware.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 7416,
          "human": "0.000007s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 1546,
        "bytes_printed": 1863,
        "matched_lines": 7,
        "matches": 7
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/build-mirrors-manifest.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/build-mirrors-manifest.mjs"
      },
      "lines": {
        "text": "    schemaVersion: raw?.schemaVersion || raw?.schema || \"unknown\",\n"
      },
      "line_number": 53,
      "absolute_offset": 1258,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 24,
          "end": 37
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/build-mirrors-manifest.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 23834,
          "human": "0.000024s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 1833,
        "bytes_printed": 412,
        "matched_lines": 1,
        "matches": 2
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/truth-chain/trace_ui_to_origin.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/truth-chain/trace_ui_to_origin.mjs"
      },
      "lines": {
        "text": "    schema_version: json?.schema_version || json?.schemaVersion || null,\n"
      },
      "line_number": 112,
      "absolute_offset": 4697,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 50,
          "end": 63
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/truth-chain/trace_ui_to_origin.mjs"
      },
      "lines": {
        "text": "    meta: pickPaths(stockRes.json, ['meta.status', 'meta.data_date', 'meta.provider', 'meta.data_source', 'meta.mode', 'meta.asOf', 'meta.freshness']),\n"
      },
      "line_number": 178,
      "absolute_offset": 7808,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/truth-chain/trace_ui_to_origin.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 6958,
          "human": "0.000007s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 10176,
        "bytes_printed": 740,
        "matched_lines": 2,
        "matches": 2
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/_lib/util/items-count.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/_lib/util/items-count.js"
      },
      "lines": {
        "text": "  if (meta && typeof meta === \"object\" && !meta.reason) {\n"
      },
      "line_number": 17,
      "absolute_offset": 615,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 21,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/_lib/util/items-count.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 3084,
          "human": "0.000003s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 731,
        "bytes_printed": 337,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/_shared/feature-contract.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/feature-contract.js"
      },
      "lines": {
        "text": "  const schemaVersion =\n"
      },
      "line_number": 70,
      "absolute_offset": 2501,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 8,
          "end": 21
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/feature-contract.js"
      },
      "lines": {
        "text": "    typeof payload.schemaVersion === \"number\" ? payload.schemaVersion : 1;\n"
      },
      "line_number": 71,
      "absolute_offset": 2525,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 19,
          "end": 32
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 56,
          "end": 69
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/feature-contract.js"
      },
      "lines": {
        "text": "    schemaVersion,\n"
      },
      "line_number": 101,
      "absolute_offset": 3433,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/_shared/feature-contract.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 4917,
          "human": "0.000005s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 4164,
        "bytes_printed": 911,
        "matched_lines": 3,
        "matches": 4
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 26,
      "absolute_offset": 615,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only.js"
      },
      "lines": {
        "text": "    schemaVersion: \"v1\",\n"
      },
      "line_number": 34,
      "absolute_offset": 938,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only.js"
      },
      "lines": {
        "text": "      class: 'UI_CONTRACT_FAILED',\n"
      },
      "line_number": 153,
      "absolute_offset": 3785,
      "submatches": [
        {
          "match": {
            "text": "CONTRACT_FAIL"
          },
          "start": 17,
          "end": 30
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 295,
      "absolute_offset": 8130,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only.js"
      },
      "lines": {
        "text": "    // Return maintenance envelope\n"
      },
      "line_number": 498,
      "absolute_offset": 14336,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 26,
          "end": 34
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only.js"
      },
      "lines": {
        "text": "        meta: {\n"
      },
      "line_number": 515,
      "absolute_offset": 14870,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 8,
          "end": 13
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only.js"
      },
      "lines": {
        "text": "  const isV3 = snapshot.schema_version === \"3.0\" || snapshot.schemaVersion === \"v3\";\n"
      },
      "line_number": 535,
      "absolute_offset": 15345,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 61,
          "end": 74
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 10417,
          "human": "0.000010s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 16354,
        "bytes_printed": 1762,
        "matched_lines": 7,
        "matches": 7
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/_shared/contracts.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/contracts.js"
      },
      "lines": {
        "text": "  const meta = doc.metadata;\n"
      },
      "line_number": 124,
      "absolute_offset": 4154,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/_shared/contracts.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 6416,
          "human": "0.000006s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 5155,
        "bytes_printed": 311,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/_lib/provider-state.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/_lib/provider-state.js"
      },
      "lines": {
        "text": "    schemaVersion: \"v1\",\n"
      },
      "line_number": 24,
      "absolute_offset": 484,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/_lib/provider-state.js"
      },
      "lines": {
        "text": "        schemaVersion: parsed.schemaVersion || \"v1\",\n"
      },
      "line_number": 33,
      "absolute_offset": 696,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 8,
          "end": 21
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 30,
          "end": 43
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/_lib/provider-state.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 7250,
          "human": "0.000007s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 4740,
        "bytes_printed": 620,
        "matched_lines": 2,
        "matches": 3
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/_shared/cache-law.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/cache-law.js"
      },
      "lines": {
        "text": "  return `eodmeta:${uuid}`;\n"
      },
      "line_number": 46,
      "absolute_offset": 1263,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 13,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/cache-law.js"
      },
      "lines": {
        "text": "    return { value: result?.value ?? null, meta: result };\n"
      },
      "line_number": 57,
      "absolute_offset": 1510,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 43,
          "end": 48
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/cache-law.js"
      },
      "lines": {
        "text": "    return { value, meta: { hit: value != null } };\n"
      },
      "line_number": 63,
      "absolute_offset": 1725,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 20,
          "end": 25
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/_shared/cache-law.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 5416,
          "human": "0.000005s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 3933,
        "bytes_printed": 824,
        "matched_lines": 3,
        "matches": 3
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/generate-health-snapshot.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health-snapshot.mjs"
      },
      "lines": {
        "text": "import { loadSnapshotEnvelopeSchema, createValidator, buildEnvelope } from \"./lib/envelope-builder.mjs\";\n"
      },
      "line_number": 3,
      "absolute_offset": 56,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 82,
          "end": 90
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health-snapshot.mjs"
      },
      "lines": {
        "text": "const SCHEMA_PATH = \"schemas/snapshot-envelope.schema.json\";\n"
      },
      "line_number": 6,
      "absolute_offset": 218,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 38,
          "end": 46
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health-snapshot.mjs"
      },
      "lines": {
        "text": "  // Preserve any existing meaningful content as data payload, but normalize envelope strictly.\n"
      },
      "line_number": 22,
      "absolute_offset": 644,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 77,
          "end": 85
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health-snapshot.mjs"
      },
      "lines": {
        "text": "  // 2) existing.data.data if envelope-like legacy\n"
      },
      "line_number": 25,
      "absolute_offset": 788,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 30,
          "end": 38
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/generate-health-snapshot.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 5458,
          "human": "0.000005s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 1733,
        "bytes_printed": 1219,
        "matched_lines": 4,
        "matches": 4
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/_shared/scheduler-law.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/scheduler-law.js"
      },
      "lines": {
        "text": "    await putJsonKV(env, \"meta:scheduler:last_run\", lastRun, HEARTBEAT_TTL_SECONDS);\n"
      },
      "line_number": 155,
      "absolute_offset": 4542,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 26,
          "end": 31
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/scheduler-law.js"
      },
      "lines": {
        "text": "    await putJsonKV(env, \"meta:scheduler:last_ok\", lastOk, HEARTBEAT_TTL_SECONDS);\n"
      },
      "line_number": 158,
      "absolute_offset": 4647,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 26,
          "end": 31
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/scheduler-law.js"
      },
      "lines": {
        "text": "    await putJsonKV(env, \"meta:scheduler:status\", status, STATUS_TTL_SECONDS);\n"
      },
      "line_number": 161,
      "absolute_offset": 4750,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 26,
          "end": 31
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/scheduler-law.js"
      },
      "lines": {
        "text": "  const status = await getJsonKV(env, \"meta:scheduler:status\");\n"
      },
      "line_number": 374,
      "absolute_offset": 10531,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 39,
          "end": 44
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/_shared/scheduler-law.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 8125,
          "human": "0.000008s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 10629,
        "bytes_printed": 1231,
        "matched_lines": 4,
        "matches": 4
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/mirror-breakout-energy.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/mirror-breakout-energy.mjs"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 79,
      "absolute_offset": 2896,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/mirror-breakout-energy.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 11459,
          "human": "0.000011s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 7100,
        "bytes_printed": 291,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/ui-path/prove_ui_path.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ui-path/prove_ui_path.mjs"
      },
      "lines": {
        "text": "        schema_version: json.schema_version || json.schemaVersion || null,\n"
      },
      "line_number": 75,
      "absolute_offset": 2187,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 52,
          "end": 65
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ui-path/prove_ui_path.mjs"
      },
      "lines": {
        "text": "        meta: json.meta || null,\n"
      },
      "line_number": 76,
      "absolute_offset": 2262,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 8,
          "end": 13
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ui-path/prove_ui_path.mjs"
      },
      "lines": {
        "text": "  const meta = winning?.response_excerpt?.meta || {};\n"
      },
      "line_number": 159,
      "absolute_offset": 5601,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/ui-path/prove_ui_path.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 6833,
          "human": "0.000007s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 8407,
        "bytes_printed": 851,
        "matched_lines": 3,
        "matches": 3
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-handler.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-handler.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 28,
      "absolute_offset": 686,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-handler.js"
      },
      "lines": {
        "text": "      schemaVersion: 1,\n"
      },
      "line_number": 32,
      "absolute_offset": 774,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 6,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-handler.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 5709,
          "human": "0.000006s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 4194,
        "bytes_printed": 537,
        "matched_lines": 2,
        "matches": 2
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-backup.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-backup.js"
      },
      "lines": {
        "text": " * Legacy: { ok, data: dataObject, meta: { status, updatedAt, source } }\n"
      },
      "line_number": 10,
      "absolute_offset": 344,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 35,
          "end": 40
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-backup.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 22,
      "absolute_offset": 716,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-backup.js"
      },
      "lines": {
        "text": "    schemaVersion: \"v1\", // Legacy format identifier\n"
      },
      "line_number": 30,
      "absolute_offset": 1039,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-backup.js"
      },
      "lines": {
        "text": "        const isV3 = parsed.schema_version === \"3.0\" || parsed.schemaVersion === \"v3\";\n"
      },
      "line_number": 96,
      "absolute_offset": 3458,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 63,
          "end": 76
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-backup.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 7125,
          "human": "0.000007s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 5526,
        "bytes_printed": 1174,
        "matched_lines": 4,
        "matches": 4
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/_shared/resilience.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/resilience.js"
      },
      "lines": {
        "text": "  const meta = next.meta || {};\n"
      },
      "line_number": 47,
      "absolute_offset": 1273,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/resilience.js"
      },
      "lines": {
        "text": "  if (!meta.schemaVersion) meta.schemaVersion = 1;\n"
      },
      "line_number": 49,
      "absolute_offset": 1341,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 12,
          "end": 25
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 32,
          "end": 45
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/resilience.js"
      },
      "lines": {
        "text": "  next.meta = meta;\n"
      },
      "line_number": 90,
      "absolute_offset": 2752,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 7,
          "end": 13
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/resilience.js"
      },
      "lines": {
        "text": "  const meta = {\n"
      },
      "line_number": 221,
      "absolute_offset": 7192,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/_shared/resilience.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 13875,
          "human": "0.000014s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 20471,
        "bytes_printed": 1076,
        "matched_lines": 4,
        "matches": 5
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/aggregator/finalize.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/aggregator/finalize.mjs"
      },
      "lines": {
        "text": "import { validateEnvelopeSchema } from '../lib/envelope.js';\n"
      },
      "line_number": 20,
      "absolute_offset": 646,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 9,
          "end": 25
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 47,
          "end": 55
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/aggregator/finalize.mjs"
      },
      "lines": {
        "text": " * Validate snapshot envelope\n"
      },
      "line_number": 172,
      "absolute_offset": 5318,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 21,
          "end": 29
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/aggregator/finalize.mjs"
      },
      "lines": {
        "text": "  const schemaCheck = validateEnvelopeSchema(snapshot);\n"
      },
      "line_number": 178,
      "absolute_offset": 5451,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 22,
          "end": 38
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/aggregator/finalize.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 17000,
          "human": "0.000017s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 32116,
        "bytes_printed": 895,
        "matched_lines": 3,
        "matches": 4
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "    : deriveStatus({ ok, meta: existingMeta, metadata });\n"
      },
      "line_number": 129,
      "absolute_offset": 3863,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 25,
          "end": 30
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "      metadata?.schemaVersion,\n"
      },
      "line_number": 156,
      "absolute_offset": 4663,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 16,
          "end": 29
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "      existingMeta.schemaVersion\n"
      },
      "line_number": 158,
      "absolute_offset": 4729,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 19,
          "end": 32
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "  obj.meta = existingMeta;\n"
      },
      "line_number": 163,
      "absolute_offset": 4823,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 6,
          "end": 12
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "  const meta = value.meta;\n"
      },
      "line_number": 172,
      "absolute_offset": 5142,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "  const envelope = {\n"
      },
      "line_number": 204,
      "absolute_offset": 6504,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 208,
      "absolute_offset": 6580,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "  assertEnvelope(envelope);\n"
      },
      "line_number": 219,
      "absolute_offset": 6909,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 17,
          "end": 25
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "  return envelope;\n"
      },
      "line_number": 220,
      "absolute_offset": 6937,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "  const envelope = {\n"
      },
      "line_number": 226,
      "absolute_offset": 7145,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 234,
      "absolute_offset": 7357,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "  assertEnvelope(envelope);\n"
      },
      "line_number": 245,
      "absolute_offset": 7686,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 17,
          "end": 25
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "  return envelope;\n"
      },
      "line_number": 246,
      "absolute_offset": 7714,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "  const envelope = ok\n"
      },
      "line_number": 257,
      "absolute_offset": 7847,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "lines": {
        "text": "  return new Response(JSON.stringify(envelope), { status, headers: responseHeaders });\n"
      },
      "line_number": 262,
      "absolute_offset": 8104,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 37,
          "end": 45
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/_shared/envelope.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 15167,
          "human": "0.000015s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 9733,
        "bytes_printed": 3584,
        "matched_lines": 15,
        "matches": 15
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/audit/build-feature-registry.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit/build-feature-registry.mjs"
      },
      "lines": {
        "text": "    schemaVersion: \"v1\",\n"
      },
      "line_number": 88,
      "absolute_offset": 2149,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/audit/build-feature-registry.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 9917,
          "human": "0.000010s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 4752,
        "bytes_printed": 327,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/audit/build-artifacts.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit/build-artifacts.mjs"
      },
      "lines": {
        "text": "  const schemaVersion = raw?.meta?.schemaVersion || raw?.schemaVersion || \"v1\";\n"
      },
      "line_number": 69,
      "absolute_offset": 1961,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 8,
          "end": 21
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 35,
          "end": 48
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 57,
          "end": 70
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit/build-artifacts.mjs"
      },
      "lines": {
        "text": "    schemaVersion,\n"
      },
      "line_number": 111,
      "absolute_offset": 3234,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit/build-artifacts.mjs"
      },
      "lines": {
        "text": "  meta: {\n"
      },
      "line_number": 125,
      "absolute_offset": 3511,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 2,
          "end": 7
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/audit/build-artifacts.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 11083,
          "human": "0.000011s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 4370,
        "bytes_printed": 916,
        "matched_lines": 3,
        "matches": 5
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-v3.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-v3.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 24,
      "absolute_offset": 552,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-v3.js"
      },
      "lines": {
        "text": "    schemaVersion: \"v1\",\n"
      },
      "line_number": 32,
      "absolute_offset": 875,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-v3.js"
      },
      "lines": {
        "text": "      class: 'UI_CONTRACT_FAILED',\n"
      },
      "line_number": 151,
      "absolute_offset": 3772,
      "submatches": [
        {
          "match": {
            "text": "CONTRACT_FAIL"
          },
          "start": 17,
          "end": 30
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-v3.js"
      },
      "lines": {
        "text": "    // Return maintenance envelope\n"
      },
      "line_number": 333,
      "absolute_offset": 9126,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 26,
          "end": 34
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-v3.js"
      },
      "lines": {
        "text": "  const isV3 = snapshot.schema_version === \"3.0\" || snapshot.schemaVersion === \"v3\";\n"
      },
      "line_number": 361,
      "absolute_offset": 9832,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 61,
          "end": 74
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/_shared/static-only-v3.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 9834,
          "human": "0.000010s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 10556,
        "bytes_printed": 1342,
        "matched_lines": 5,
        "matches": 5
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "  const keys = ['meta:scheduler:last_ok', 'rv:scheduler:last_ok'];\n"
      },
      "line_number": 67,
      "absolute_offset": 1630,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 17,
          "end": 22
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "  let envelopeStatus = 'fresh';\n"
      },
      "line_number": 114,
      "absolute_offset": 3533,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 6,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "    envelopeStatus = 'fresh';\n"
      },
      "line_number": 203,
      "absolute_offset": 6378,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 4,
          "end": 12
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "    envelopeStatus = 'stale';\n"
      },
      "line_number": 207,
      "absolute_offset": 6501,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 4,
          "end": 12
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "        envelopeStatus = 'pending';\n"
      },
      "line_number": 211,
      "absolute_offset": 6601,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "          envelopeStatus = 'pending';\n"
      },
      "line_number": 223,
      "absolute_offset": 7033,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 10,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "        envelopeStatus = 'pending';\n"
      },
      "line_number": 238,
      "absolute_offset": 7373,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "        envelopeStatus = 'pending';\n"
      },
      "line_number": 250,
      "absolute_offset": 7741,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "          envelopeStatus = result?.ok ? 'fresh' : 'error';\n"
      },
      "line_number": 263,
      "absolute_offset": 8229,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 10,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "          envelopeStatus = 'error';\n"
      },
      "line_number": 273,
      "absolute_offset": 8555,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 10,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "        envelopeStatus = result?.ok ? 'fresh' : 'error';\n"
      },
      "line_number": 284,
      "absolute_offset": 8856,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "        envelopeStatus = 'error';\n"
      },
      "line_number": 294,
      "absolute_offset": 9162,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 330,
      "absolute_offset": 10357,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "lines": {
        "text": "      status: envelopeStatus,\n"
      },
      "line_number": 331,
      "absolute_offset": 10369,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 14,
          "end": 22
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/resolve.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 65750,
          "human": "0.000066s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 11432,
        "bytes_printed": 3331,
        "matched_lines": 14,
        "matches": 14
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/audit/generate-stub-mirrors.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit/generate-stub-mirrors.mjs"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 33,
      "absolute_offset": 922,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit/generate-stub-mirrors.mjs"
      },
      "lines": {
        "text": "      schemaVersion: feature.schemaVersion || \"v1\"\n"
      },
      "line_number": 38,
      "absolute_offset": 1042,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 6,
          "end": 19
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 29,
          "end": 42
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/audit/generate-stub-mirrors.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 21208,
          "human": "0.000021s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 1229,
        "bytes_printed": 622,
        "matched_lines": 2,
        "matches": 3
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "import { buildEnvelope, validateEnvelopeSchema } from '../lib/envelope.js';\n"
      },
      "line_number": 8,
      "absolute_offset": 219,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 24,
          "end": 40
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 62,
          "end": 70
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "  const envelope = buildEnvelope(validBars, {\n"
      },
      "line_number": 1407,
      "absolute_offset": 43736,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.upstream = { ...envelope.metadata.upstream, ...upstream };\n"
      },
      "line_number": 1437,
      "absolute_offset": 44707,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 36,
          "end": 44
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.provider = providerLabel;\n"
      },
      "line_number": 1438,
      "absolute_offset": 44786,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.as_of = asOf;\n"
      },
      "line_number": 1439,
      "absolute_offset": 44832,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.source_chain = sourceChainMeta;\n"
      },
      "line_number": 1441,
      "absolute_offset": 44867,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.compute = {\n"
      },
      "line_number": 1446,
      "absolute_offset": 45120,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.digest = computeSnapshotDigest(envelope);\n"
      },
      "line_number": 1455,
      "absolute_offset": 45473,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 51,
          "end": 59
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "  const recordCount = typeof envelope.metadata.record_count === 'number'\n"
      },
      "line_number": 1457,
      "absolute_offset": 45536,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 29,
          "end": 37
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "    ? envelope.metadata.record_count\n"
      },
      "line_number": 1458,
      "absolute_offset": 45609,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 6,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "    : (Array.isArray(envelope.data) ? envelope.data.length : 0);\n"
      },
      "line_number": 1459,
      "absolute_offset": 45646,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 21,
          "end": 29
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 38,
          "end": 46
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "  envelope.meta = {\n"
      },
      "line_number": 1461,
      "absolute_offset": 45775,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        },
        {
          "match": {
            "text": "meta ="
          },
          "start": 11,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "    status: envelope.metadata.validation?.passed ? 'OK' : 'ERROR',\n"
      },
      "line_number": 1462,
      "absolute_offset": 45795,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 12,
          "end": 20
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "    reason: envelope.error?.class || (envelope.metadata.validation?.passed ? 'OK' : 'VALIDATION_FAILED'),\n"
      },
      "line_number": 1463,
      "absolute_offset": 45862,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 12,
          "end": 20
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 38,
          "end": 46
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "    provider: envelope.metadata.provider,\n"
      },
      "line_number": 1464,
      "absolute_offset": 45968,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 14,
          "end": 22
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "    source: envelope.metadata.source,\n"
      },
      "line_number": 1465,
      "absolute_offset": 46010,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 12,
          "end": 20
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "    asOf: envelope.metadata.as_of || null,\n"
      },
      "line_number": 1466,
      "absolute_offset": 46048,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 10,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "    savedAt: envelope.metadata.published_at || envelope.metadata.fetched_at || new Date().toISOString(),\n"
      },
      "line_number": 1467,
      "absolute_offset": 46091,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 13,
          "end": 21
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 47,
          "end": 55
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "    error: envelope.error?.class || null,\n"
      },
      "line_number": 1468,
      "absolute_offset": 46196,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 11,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "  const schemaCheck = validateEnvelopeSchema(envelope);\n"
      },
      "line_number": 1490,
      "absolute_offset": 46987,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 22,
          "end": 38
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 45,
          "end": 53
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "    envelope,\n"
      },
      "line_number": 1501,
      "absolute_offset": 47458,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 4,
          "end": 12
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "lines": {
        "text": "  await writeFile(snapshotPath, JSON.stringify(envelope, null, 2) + '\\n', 'utf-8');\n"
      },
      "line_number": 1528,
      "absolute_offset": 48425,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 47,
          "end": 55
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/providers/market-prices-v3.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 26833,
          "human": "0.000027s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 49634,
        "bytes_printed": 6366,
        "matched_lines": 22,
        "matches": 30
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "import { buildEnvelope, validateEnvelopeSchema } from '../lib/envelope.js';\n"
      },
      "line_number": 6,
      "absolute_offset": 160,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 24,
          "end": 40
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 62,
          "end": 70
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "  const envelope = buildEnvelope(data, {\n"
      },
      "line_number": 235,
      "absolute_offset": 7794,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "  envelope.data = data;\n"
      },
      "line_number": 249,
      "absolute_offset": 8200,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.record_count = symbolCount;\n"
      },
      "line_number": 250,
      "absolute_offset": 8224,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.provider = 'score-engine';\n"
      },
      "line_number": 251,
      "absolute_offset": 8272,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.validation = {\n"
      },
      "line_number": 252,
      "absolute_offset": 8319,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "    ...envelope.metadata.validation,\n"
      },
      "line_number": 253,
      "absolute_offset": 8354,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 7,
          "end": 15
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.digest = computeSnapshotDigest(envelope);\n"
      },
      "line_number": 256,
      "absolute_offset": 8438,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 51,
          "end": 59
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "  envelope.module = envelope.module || envelope.metadata?.module || MODULE_NAME;\n"
      },
      "line_number": 257,
      "absolute_offset": 8500,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 20,
          "end": 28
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 39,
          "end": 47
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "  const schemaCheck = validateEnvelopeSchema(envelope);\n"
      },
      "line_number": 259,
      "absolute_offset": 8582,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 22,
          "end": 38
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 45,
          "end": 53
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "    envelope,\n"
      },
      "line_number": 267,
      "absolute_offset": 8860,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 4,
          "end": 12
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "lines": {
        "text": "  await writeFile(join(artifactsOutDir, 'snapshot.json'), JSON.stringify(envelope, null, 2) + '\\n', 'utf-8');\n"
      },
      "line_number": 282,
      "absolute_offset": 9099,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 73,
          "end": 81
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/providers/market-score-v3.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 13458,
          "human": "0.000013s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 9805,
        "bytes_printed": 3476,
        "matched_lines": 12,
        "matches": 17
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "lines": {
        "text": " * Outputs v3.0 envelope format ready for validation and artifact upload.\n"
      },
      "line_number": 11,
      "absolute_offset": 267,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 16,
          "end": 24
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "lines": {
        "text": "import { buildEnvelope, computeFreshness } from '../lib/envelope.js';\n"
      },
      "line_number": 17,
      "absolute_offset": 476,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 56,
          "end": 64
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "lines": {
        "text": "    // If path starts with $.metadata, skip it (metadata is added later in envelope)\n"
      },
      "line_number": 145,
      "absolute_offset": 4724,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 75,
          "end": 83
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "lines": {
        "text": "  // Build envelope\n"
      },
      "line_number": 414,
      "absolute_offset": 14150,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 11,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "lines": {
        "text": "  const envelope = buildEnvelope({\n"
      },
      "line_number": 416,
      "absolute_offset": 14202,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "lines": {
        "text": "  computeFreshness(envelope, config.freshness);\n"
      },
      "line_number": 429,
      "absolute_offset": 14501,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "lines": {
        "text": "    digest: envelope.metadata.digest,\n"
      },
      "line_number": 442,
      "absolute_offset": 14974,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 12,
          "end": 20
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "lines": {
        "text": "    record_count: envelope.metadata.record_count,\n"
      },
      "line_number": 443,
      "absolute_offset": 15012,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 18,
          "end": 26
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "lines": {
        "text": "    freshness: envelope.metadata.freshness,\n"
      },
      "line_number": 445,
      "absolute_offset": 15115,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 15,
          "end": 23
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "lines": {
        "text": "  await writeFile(snapshotPath, JSON.stringify(envelope, null, 2) + '\\n', 'utf-8');\n"
      },
      "line_number": 478,
      "absolute_offset": 16389,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 47,
          "end": 55
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "lines": {
        "text": "  console.log(`   Digest: ${envelope.metadata.digest.substring(0, 16)}...`);\n"
      },
      "line_number": 486,
      "absolute_offset": 16778,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 28,
          "end": 36
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/providers/market-health-v3.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 12584,
          "human": "0.000013s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 17028,
        "bytes_printed": 3022,
        "matched_lines": 11,
        "matches": 11
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/scheduler/run.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/scheduler/run.js"
      },
      "lines": {
        "text": "import { jsonEnvelopeResponse } from \"../_shared/envelope.js\";\n"
      },
      "line_number": 1,
      "absolute_offset": 0,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 49,
          "end": 57
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/scheduler/run.js"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 23,
      "absolute_offset": 784,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/scheduler/run.js"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 39,
      "absolute_offset": 1128,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/scheduler/run.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 92,
      "absolute_offset": 2641,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/scheduler/run.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 13000,
          "human": "0.000013s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 2789,
        "bytes_printed": 966,
        "matched_lines": 4,
        "matches": 4
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/scientific-analyzer/generate-analysis.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/scientific-analyzer/generate-analysis.mjs"
      },
      "lines": {
        "text": "        _meta: {\n"
      },
      "line_number": 514,
      "absolute_offset": 18674,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 9,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/scientific-analyzer/generate-analysis.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 16166,
          "human": "0.000016s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 19972,
        "bytes_printed": 329,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/generate-eod-mirrors.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-eod-mirrors.mjs"
      },
      "lines": {
        "text": "    schemaVersion: 1,\n"
      },
      "line_number": 36,
      "absolute_offset": 946,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/generate-eod-mirrors.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 4500,
          "human": "0.000005s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 2130,
        "bytes_printed": 305,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "lines": {
        "text": "import { buildEnvelope, validateEnvelopeSchema } from '../lib/envelope.js';\n"
      },
      "line_number": 6,
      "absolute_offset": 184,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 24,
          "end": 40
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 62,
          "end": 70
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "lines": {
        "text": "  const envelope = buildEnvelope([], {\n"
      },
      "line_number": 269,
      "absolute_offset": 8170,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "lines": {
        "text": "  envelope.data = data;\n"
      },
      "line_number": 282,
      "absolute_offset": 8481,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.record_count = symbolCount;\n"
      },
      "line_number": 283,
      "absolute_offset": 8505,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.provider = 'universe-engine';\n"
      },
      "line_number": 284,
      "absolute_offset": 8553,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.upstream = upstream;\n"
      },
      "line_number": 285,
      "absolute_offset": 8603,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.digest = computeSnapshotDigest(envelope);\n"
      },
      "line_number": 286,
      "absolute_offset": 8644,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 51,
          "end": 59
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "lines": {
        "text": "  envelope.module = envelope.module || envelope.metadata?.module || MODULE_NAME;\n"
      },
      "line_number": 287,
      "absolute_offset": 8706,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 20,
          "end": 28
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 39,
          "end": 47
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "lines": {
        "text": "  const schemaCheck = validateEnvelopeSchema(envelope);\n"
      },
      "line_number": 289,
      "absolute_offset": 8788,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 22,
          "end": 38
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 45,
          "end": 53
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "lines": {
        "text": "    envelope,\n"
      },
      "line_number": 298,
      "absolute_offset": 9112,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 4,
          "end": 12
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "lines": {
        "text": "  await writeFile(snapshotPath, JSON.stringify(envelope, null, 2) + '\\n', 'utf-8');\n"
      },
      "line_number": 317,
      "absolute_offset": 9712,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 47,
          "end": 55
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/providers/universe-v2.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 11542,
          "human": "0.000012s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 10309,
        "bytes_printed": 3164,
        "matched_lines": 11,
        "matches": 16
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/scheduler/health.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/scheduler/health.js"
      },
      "lines": {
        "text": "  const lastOk = await readFirstKV(env, [\"meta:scheduler:last_ok\", \"rv:scheduler:last_ok\"]);\n"
      },
      "line_number": 37,
      "absolute_offset": 1207,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 42,
          "end": 47
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/scheduler/health.js"
      },
      "lines": {
        "text": "  const lastRun = await readFirstKV(env, [\"meta:scheduler:last_run\", \"rv:scheduler:last_run\"]);\n"
      },
      "line_number": 38,
      "absolute_offset": 1300,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 43,
          "end": 48
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/scheduler/health.js"
      },
      "lines": {
        "text": "    key: lastOk?.key || \"meta:scheduler:last_ok\",\n"
      },
      "line_number": 60,
      "absolute_offset": 2137,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 25,
          "end": 30
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/scheduler/health.js"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 79,
      "absolute_offset": 2682,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/scheduler/health.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 92,
      "absolute_offset": 2943,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/scheduler/health.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 10666,
          "human": "0.000011s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 3125,
        "bytes_printed": 1355,
        "matched_lines": 5,
        "matches": 5
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      },
      "lines": {
        "text": "import { buildEnvelope, validateEnvelopeSchema } from '../lib/envelope.js';\n"
      },
      "line_number": 6,
      "absolute_offset": 175,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 24,
          "end": 40
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 62,
          "end": 70
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      },
      "lines": {
        "text": "  const envelope = buildEnvelope(data, {\n"
      },
      "line_number": 448,
      "absolute_offset": 16156,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.provider = 'derived';\n"
      },
      "line_number": 462,
      "absolute_offset": 16535,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.record_count = data.length;\n"
      },
      "line_number": 463,
      "absolute_offset": 16577,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.validation = {\n"
      },
      "line_number": 464,
      "absolute_offset": 16625,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      },
      "lines": {
        "text": "    ...envelope.metadata.validation,\n"
      },
      "line_number": 465,
      "absolute_offset": 16660,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 7,
          "end": 15
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      },
      "lines": {
        "text": "  envelope.metadata.digest = computeSnapshotDigest(envelope);\n"
      },
      "line_number": 468,
      "absolute_offset": 16728,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 51,
          "end": 59
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      },
      "lines": {
        "text": "  const schemaCheck = validateEnvelopeSchema(envelope);\n"
      },
      "line_number": 470,
      "absolute_offset": 16791,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 22,
          "end": 38
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 45,
          "end": 53
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      },
      "lines": {
        "text": "    envelope,\n"
      },
      "line_number": 478,
      "absolute_offset": 17100,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 4,
          "end": 12
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      },
      "lines": {
        "text": "  await writeFile(snapshotPath, JSON.stringify(envelope, null, 2) + '\\n', 'utf-8');\n"
      },
      "line_number": 507,
      "absolute_offset": 18008,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 47,
          "end": 55
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/providers/market-stats-v3.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 12584,
          "human": "0.000013s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 18602,
        "bytes_printed": 2833,
        "matched_lines": 10,
        "matches": 13
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/update-news.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/update-news.mjs"
      },
      "lines": {
        "text": "    schemaVersion: 1,\n"
      },
      "line_number": 191,
      "absolute_offset": 5241,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/update-news.mjs"
      },
      "lines": {
        "text": "    schemaVersion: \"rv-mirror-v1\",\n"
      },
      "line_number": 208,
      "absolute_offset": 5532,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/update-news.mjs"
      },
      "lines": {
        "text": "    const meta = buildMeta({\n"
      },
      "line_number": 383,
      "absolute_offset": 10651,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 10,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/update-news.mjs"
      },
      "lines": {
        "text": "  const meta = buildMeta({\n"
      },
      "line_number": 408,
      "absolute_offset": 11262,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/update-news.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 13250,
          "human": "0.000013s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 11648,
        "bytes_printed": 968,
        "matched_lines": 4,
        "matches": 4
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/fundamentals.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/fundamentals.js"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 204,
      "absolute_offset": 6627,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/fundamentals.js"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 242,
      "absolute_offset": 7903,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/fundamentals.js"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 323,
      "absolute_offset": 10372,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/fundamentals.js"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 382,
      "absolute_offset": 12284,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/fundamentals.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 437,
      "absolute_offset": 13997,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/fundamentals.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 17250,
          "human": "0.000017s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 16072,
        "bytes_printed": 1129,
        "matched_lines": 5,
        "matches": 5
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/generate-health.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health.mjs"
      },
      "lines": {
        "text": "    schemaVersion: \"1.0.0\",\n"
      },
      "line_number": 70,
      "absolute_offset": 2405,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health.mjs"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 71,
      "absolute_offset": 2433,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health.mjs"
      },
      "lines": {
        "text": "  if (!history || typeof history !== \"object\") return { schemaVersion: \"1.0.0\", items: [] };\n"
      },
      "line_number": 94,
      "absolute_offset": 2946,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 56,
          "end": 69
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health.mjs"
      },
      "lines": {
        "text": "  if (!Array.isArray(history.items)) return { schemaVersion: \"1.0.0\", items: [] };\n"
      },
      "line_number": 95,
      "absolute_offset": 3039,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 46,
          "end": 59
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health.mjs"
      },
      "lines": {
        "text": "  return { schemaVersion: \"1.0.0\", items: history.items };\n"
      },
      "line_number": 96,
      "absolute_offset": 3122,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 11,
          "end": 24
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health.mjs"
      },
      "lines": {
        "text": "  return { schemaVersion: \"1.0.0\", items: last30 };\n"
      },
      "line_number": 106,
      "absolute_offset": 3628,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 11,
          "end": 24
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health.mjs"
      },
      "lines": {
        "text": "      schemaVersion: \"1.0.0\",\n"
      },
      "line_number": 115,
      "absolute_offset": 3961,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 6,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/generate-health.mjs"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 116,
      "absolute_offset": 3991,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/generate-health.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 15000,
          "human": "0.000015s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 5165,
        "bytes_printed": 2063,
        "matched_lines": 8,
        "matches": 8
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/smoke-rvci.sh"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/smoke-rvci.sh"
      },
      "lines": {
        "text": "meta = payload.get(\"meta\") or {}\n"
      },
      "line_number": 68,
      "absolute_offset": 1777,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 0,
          "end": 6
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/smoke-rvci.sh"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 8167,
          "human": "0.000008s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 6326,
        "bytes_printed": 289,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 139,
      "absolute_offset": 4058,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "function buildBatchAnalysis(envelopes) {\n"
      },
      "line_number": 171,
      "absolute_offset": 4930,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 28,
          "end": 36
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "  const confidences = envelopes\n"
      },
      "line_number": 172,
      "absolute_offset": 4971,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 22,
          "end": 30
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "  const fibRatios = envelopes\n"
      },
      "line_number": 177,
      "absolute_offset": 5227,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 20,
          "end": 28
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "  const ruleStats = envelopes.map((env) => env?.data?.elliott?.completedPattern?.rules || {});\n"
      },
      "line_number": 180,
      "absolute_offset": 5358,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 20,
          "end": 28
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "    const envelope = buildEnvelope(ticker, daily);\n"
      },
      "line_number": 374,
      "absolute_offset": 11786,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 10,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "    envelope.data.features.lastClose = bars[bars.length - 1]?.close ?? null;\n"
      },
      "line_number": 375,
      "absolute_offset": 11837,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 4,
          "end": 12
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "    envelope.data.elliott.developingPattern.disclaimer = \"Reference levels only -- no prediction\";\n"
      },
      "line_number": 376,
      "absolute_offset": 11914,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 4,
          "end": 12
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "    await writeJson(relPath, envelope);\n"
      },
      "line_number": 379,
      "absolute_offset": 12072,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 29,
          "end": 37
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "    return envelope;\n"
      },
      "line_number": 381,
      "absolute_offset": 12140,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 11,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "  const envelopes = results.filter(Boolean);\n"
      },
      "line_number": 384,
      "absolute_offset": 12168,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "  for (const env of envelopes) {\n"
      },
      "line_number": 396,
      "absolute_offset": 12650,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 20,
          "end": 28
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 408,
      "absolute_offset": 13050,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "lines": {
        "text": "  const batchAnalysis = buildBatchAnalysis(envelopes);\n"
      },
      "line_number": 434,
      "absolute_offset": 13592,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 43,
          "end": 51
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/pipeline/build-marketphase-from-kv.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 28292,
          "human": "0.000028s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 15163,
        "bytes_printed": 3784,
        "matched_lines": 14,
        "matches": 14
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/ops/validate-truth.sh"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/validate-truth.sh"
      },
      "lines": {
        "text": "# health snapshot latest (envelope)\n"
      },
      "line_number": 53,
      "absolute_offset": 1740,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 26,
          "end": 34
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/validate-truth.sh"
      },
      "lines": {
        "text": "  pass \"health latest snapshot envelope ok\"\n"
      },
      "line_number": 57,
      "absolute_offset": 1975,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 31,
          "end": 39
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/validate-truth.sh"
      },
      "lines": {
        "text": "  warn \"missing health latest snapshot envelope\"\n"
      },
      "line_number": 59,
      "absolute_offset": 2024,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 39,
          "end": 47
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/ops/validate-truth.sh"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 6792,
          "human": "0.000007s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 2357,
        "bytes_printed": 807,
        "matched_lines": 3,
        "matches": 3
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/contract-smoke.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/contract-smoke.js"
      },
      "lines": {
        "text": "function validateEnvelope(obj) {\n"
      },
      "line_number": 60,
      "absolute_offset": 1911,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 9,
          "end": 25
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/contract-smoke.js"
      },
      "lines": {
        "text": "  const schemaPath = path.join(root, \"schemas\", \"api-envelope.schema.json\");\n"
      },
      "line_number": 110,
      "absolute_offset": 4013,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 53,
          "end": 61
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/contract-smoke.js"
      },
      "lines": {
        "text": "    meta: { status: \"LIVE\", reason: \"\", schemaVersion: \"v1\" },\n"
      },
      "line_number": 118,
      "absolute_offset": 4214,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 40,
          "end": 53
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/contract-smoke.js"
      },
      "lines": {
        "text": "  if (!validateEnvelope(sample)) {\n"
      },
      "line_number": 123,
      "absolute_offset": 4324,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 7,
          "end": 23
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/contract-smoke.js"
      },
      "lines": {
        "text": "    throw new Error(\"Sample envelope does not match required shape\");\n"
      },
      "line_number": 124,
      "absolute_offset": 4359,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 28,
          "end": 36
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/contract-smoke.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 17625,
          "human": "0.000018s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 8115,
        "bytes_printed": 1408,
        "matched_lines": 5,
        "matches": 6
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 101,
      "absolute_offset": 3059,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "  const envelope = buildEnvelope(symbol, dailyAnalysis, {\n"
      },
      "line_number": 158,
      "absolute_offset": 4790,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "  envelope.data.features.lastClose = ohlc[ohlc.length - 1]?.close ?? null;\n"
      },
      "line_number": 161,
      "absolute_offset": 4896,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "  envelope.data.elliott.developingPattern.disclaimer =\n"
      },
      "line_number": 162,
      "absolute_offset": 4971,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "  await writeJson(mirrorPath, envelope);\n"
      },
      "line_number": 166,
      "absolute_offset": 5137,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 30,
          "end": 38
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "  return envelope;\n"
      },
      "line_number": 167,
      "absolute_offset": 5178,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "function buildBatchAnalysis(envelopes) {\n"
      },
      "line_number": 170,
      "absolute_offset": 5200,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 28,
          "end": 36
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "  const confidences = envelopes\n"
      },
      "line_number": 171,
      "absolute_offset": 5241,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 22,
          "end": 30
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "  const fibRatios = envelopes\n"
      },
      "line_number": 176,
      "absolute_offset": 5497,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 20,
          "end": 28
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "  const ruleStats = envelopes.map((env) => env?.data?.elliott?.completedPattern?.rules || {});\n"
      },
      "line_number": 179,
      "absolute_offset": 5628,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 20,
          "end": 28
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "  const envelopes = [];\n"
      },
      "line_number": 205,
      "absolute_offset": 6730,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "    const envelope = await generateSymbol(symbol, dummyMode);\n"
      },
      "line_number": 208,
      "absolute_offset": 6789,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 10,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "    envelopes.push(envelope);\n"
      },
      "line_number": 209,
      "absolute_offset": 6851,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 4,
          "end": 12
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 216,
      "absolute_offset": 7004,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "      symbols: envelopes.map((env) => ({\n"
      },
      "line_number": 231,
      "absolute_offset": 7380,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 15,
          "end": 23
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "    symbols: envelopes.map((env) => env.meta.symbol),\n"
      },
      "line_number": 241,
      "absolute_offset": 7614,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 13,
          "end": 21
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "lines": {
        "text": "  const batchAnalysis = buildBatchAnalysis(envelopes);\n"
      },
      "line_number": 246,
      "absolute_offset": 7721,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 43,
          "end": 51
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/marketphase-generate.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 23333,
          "human": "0.000023s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 8351,
        "bytes_printed": 4315,
        "matched_lines": 17,
        "matches": 18
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/seed-mirrors.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/seed-mirrors.mjs"
      },
      "lines": {
        "text": "  mirror._meta = {\n"
      },
      "line_number": 482,
      "absolute_offset": 17186,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 10,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/seed-mirrors.mjs"
      },
      "lines": {
        "text": "    schemaVersion: 1,\n"
      },
      "line_number": 501,
      "absolute_offset": 17799,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/seed-mirrors.mjs"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 510,
      "absolute_offset": 18203,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/seed-mirrors.mjs"
      },
      "lines": {
        "text": "    schemaVersion: \"1.0\",\n"
      },
      "line_number": 1038,
      "absolute_offset": 36566,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/seed-mirrors.mjs"
      },
      "lines": {
        "text": "    schemaVersion: \"1.0\",\n"
      },
      "line_number": 1144,
      "absolute_offset": 39870,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/seed-mirrors.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 28666,
          "human": "0.000029s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 41237,
        "bytes_printed": 1170,
        "matched_lines": 5,
        "matches": 5
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "    schemaVersion: \"unknown\",\n"
      },
      "line_number": 477,
      "absolute_offset": 14588,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "  block.schemaVersion = json.schemaVersion || json.schema || \"unknown\";\n"
      },
      "line_number": 494,
      "absolute_offset": 14970,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 8,
          "end": 21
        },
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 29,
          "end": 42
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "      schemaVersion: \"unknown\",\n"
      },
      "line_number": 652,
      "absolute_offset": 19956,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 6,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "      schemaVersion: \"unknown\",\n"
      },
      "line_number": 673,
      "absolute_offset": 20439,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 6,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "          meta: { error: \"BASE_URL_MISCONFIG\" },\n"
      },
      "line_number": 1007,
      "absolute_offset": 31000,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 10,
          "end": 15
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "        meta: { error: \"BASE_URL_MISCONFIG\" },\n"
      },
      "line_number": 1025,
      "absolute_offset": 31619,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 8,
          "end": 13
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "        meta: { error: \"BASE_URL_MISCONFIG\" },\n"
      },
      "line_number": 1043,
      "absolute_offset": 32261,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 8,
          "end": 13
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "  const meta = {\n"
      },
      "line_number": 1322,
      "absolute_offset": 41434,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "            schemaVersion: \"unknown\",\n"
      },
      "line_number": 1378,
      "absolute_offset": 43368,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 12,
          "end": 25
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "        meta: { ...meta, durationMs: Date.now() - start },\n"
      },
      "line_number": 1423,
      "absolute_offset": 44594,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 8,
          "end": 13
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "    meta: { ...meta, durationMs: Date.now() - start, source },\n"
      },
      "line_number": 1448,
      "absolute_offset": 45284,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 1472,
      "absolute_offset": 45930,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/audit-site.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 38625,
          "human": "0.000039s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 46642,
        "bytes_printed": 2977,
        "matched_lines": 12,
        "matches": 13
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/test-envelope.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-envelope.mjs"
      },
      "lines": {
        "text": "import { okEnvelope, errorEnvelope, assertEnvelope, ensureEnvelopePayload } from \"../functions/api/_shared/envelope.js\";\n"
      },
      "line_number": 2,
      "absolute_offset": 20,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 107,
          "end": 115
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-envelope.mjs"
      },
      "lines": {
        "text": "    assertEnvelope({ ok: true, data: null, error: null, meta: { status: \"bad\" } });\n"
      },
      "line_number": 45,
      "absolute_offset": 1868,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 56,
          "end": 61
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-envelope.mjs"
      },
      "lines": {
        "text": "  testCase.meta = nullValue; // Assign meta separately to avoid pattern match\n"
      },
      "line_number": 87,
      "absolute_offset": 3896,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 11,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-envelope.mjs"
      },
      "lines": {
        "text": "  const meta = buildCacheMeta({\n"
      },
      "line_number": 99,
      "absolute_offset": 4218,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-envelope.mjs"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 116,
      "absolute_offset": 4716,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/test-envelope.mjs"
      },
      "lines": {
        "text": "  console.log(\" envelope tests passed\");\n"
      },
      "line_number": 158,
      "absolute_offset": 6335,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/test-envelope.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 10834,
          "human": "0.000011s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 6390,
        "bytes_printed": 1611,
        "matched_lines": 6,
        "matches": 6
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "# 3. Preview API endpoints return valid envelope JSON\n"
      },
      "line_number": 8,
      "absolute_offset": 239,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 40,
          "end": 48
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "    \"scripts/test-envelope.mjs\"\n"
      },
      "line_number": 71,
      "absolute_offset": 2982,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 18,
          "end": 26
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "    \"functions/api/_shared/envelope.js\"\n"
      },
      "line_number": 73,
      "absolute_offset": 3049,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 27,
          "end": 35
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "    \"src/lib/envelope.ts\"\n"
      },
      "line_number": 74,
      "absolute_offset": 3089,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 13,
          "end": 21
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "  # test:envelope\n"
      },
      "line_number": 112,
      "absolute_offset": 4362,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "  log_info \"Running npm run test:envelope...\"\n"
      },
      "line_number": 113,
      "absolute_offset": 4380,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 33,
          "end": 41
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "  if npm run test:envelope 2>&1; then\n"
      },
      "line_number": 114,
      "absolute_offset": 4426,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 18,
          "end": 26
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "    log_pass \"test:envelope passed\"\n"
      },
      "line_number": 115,
      "absolute_offset": 4464,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "    log_fail \"test:envelope failed\"\n"
      },
      "line_number": 117,
      "absolute_offset": 4507,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "# Verify a single endpoint returns valid envelope JSON\n"
      },
      "line_number": 137,
      "absolute_offset": 5430,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 41,
          "end": 49
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "verify_envelope() {\n"
      },
      "line_number": 141,
      "absolute_offset": 5659,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 7,
          "end": 15
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "    log_pass \"Endpoint $endpoint: envelope valid ($summary)\"\n"
      },
      "line_number": 210,
      "absolute_offset": 8918,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 34,
          "end": 42
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "# Verify a POST endpoint returns valid envelope JSON\n"
      },
      "line_number": 221,
      "absolute_offset": 9180,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 39,
          "end": 47
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "verify_post_envelope() {\n"
      },
      "line_number": 223,
      "absolute_offset": 9320,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 12,
          "end": 20
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "    log_pass \"Endpoint $endpoint (POST): envelope valid ($summary)\"\n"
      },
      "line_number": 277,
      "absolute_offset": 11892,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 41,
          "end": 49
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "  verify_envelope \"/api/resolve?debug=1\" \"any\" \"cache\"\n"
      },
      "line_number": 366,
      "absolute_offset": 14640,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "  verify_envelope \"/api/stock?debug=1\" \"any\" \"cache\"\n"
      },
      "line_number": 367,
      "absolute_offset": 14695,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "  verify_envelope \"/api/scheduler/health\" \"any\"\n"
      },
      "line_number": 370,
      "absolute_offset": 14770,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "    verify_envelope \"/api/health?debug=1\" \"any\"\n"
      },
      "line_number": 377,
      "absolute_offset": 15122,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 11,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "    verify_envelope \"/api/metrics?debug=1\" \"any\"\n"
      },
      "line_number": 380,
      "absolute_offset": 15246,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 11,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "  # Error path: non-existent endpoint should return envelope with ok=false\n"
      },
      "line_number": 383,
      "absolute_offset": 15303,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 52,
          "end": 60
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "  verify_envelope \"/api/does-not-exist-runblock1-test\" \"false\"\n"
      },
      "line_number": 385,
      "absolute_offset": 15419,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "  verify_post_envelope \"/api/scheduler/run\" \"false\" '{\"job\":\"eod_stock\",\"mode\":\"s2\",\"assets\":[{\"ticker\":\"SPY\"}]}' \"\"\n"
      },
      "line_number": 433,
      "absolute_offset": 17322,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 14,
          "end": 22
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "lines": {
        "text": "    verify_post_envelope \"/api/scheduler/run\" \"any\" '{\"job\":\"eod_stock\",\"mode\":\"s2\",\"assets\":[{\"ticker\":\"SPY\"}]}' \"${RV_ADMIN_TOKEN}\"\n"
      },
      "line_number": 437,
      "absolute_offset": 17520,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 16,
          "end": 24
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/ops/verify-runblock1.zsh"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 88000,
          "human": "0.000088s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 18087,
        "bytes_printed": 6305,
        "matched_lines": 24,
        "matches": 24
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "function normalizeMirrorPayload(mirrorId, envelope) {\n"
      },
      "line_number": 59,
      "absolute_offset": 1868,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 42,
          "end": 50
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "  const raw = envelope?.raw ?? envelope;\n"
      },
      "line_number": 60,
      "absolute_offset": 1922,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 14,
          "end": 22
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 31,
          "end": 39
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "  const envelopeMeta = envelope?.meta ?? null;\n"
      },
      "line_number": 61,
      "absolute_offset": 1963,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 23,
          "end": 31
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "  const isEnvelope = envelope?.isEnvelope === true;\n"
      },
      "line_number": 62,
      "absolute_offset": 2010,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 21,
          "end": 29
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "    if (!envelopeMeta || typeof envelopeMeta !== \"object\") {\n"
      },
      "line_number": 66,
      "absolute_offset": 2168,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 32,
          "end": 40
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "      errors.push(\"envelope_missing\");\n"
      },
      "line_number": 67,
      "absolute_offset": 2229,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "        if (envelopeMeta[field] === undefined || envelopeMeta[field] === null || envelopeMeta[field] === \"\") {\n"
      },
      "line_number": 70,
      "absolute_offset": 2378,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 12,
          "end": 20
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 49,
          "end": 57
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 81,
          "end": 89
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "          errors.push(`envelope_meta_missing_${field}`);\n"
      },
      "line_number": 71,
      "absolute_offset": 2489,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 23,
          "end": 31
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "  if (raw && typeof raw === \"object\" && raw.schemaVersion && raw.mirrorId && raw.items) {\n"
      },
      "line_number": 77,
      "absolute_offset": 2577,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 44,
          "end": 57
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "  const meta = legacy.meta || {};\n"
      },
      "line_number": 89,
      "absolute_offset": 3008,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "    schemaVersion: \"rv-mirror-v1\",\n"
      },
      "line_number": 104,
      "absolute_offset": 3705,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "    const envelope = loadMirrorEnvelope(filePath);\n"
      },
      "line_number": 159,
      "absolute_offset": 5349,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 10,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "    if (!envelope) {\n"
      },
      "line_number": 160,
      "absolute_offset": 5400,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "    const normalized = normalizeMirrorPayload(mirrorId, envelope);\n"
      },
      "line_number": 164,
      "absolute_offset": 5513,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 56,
          "end": 64
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "    const envelopeErrors = normalized.errors.filter((err) => err.startsWith(\"envelope_\"));\n"
      },
      "line_number": 169,
      "absolute_offset": 5756,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 10,
          "end": 18
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 77,
          "end": 85
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "    if (envelopeErrors.length) {\n"
      },
      "line_number": 170,
      "absolute_offset": 5847,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "lines": {
        "text": "      failures.push({ mirrorId, error: \"envelope_invalid\", details: envelopeErrors });\n"
      },
      "line_number": 171,
      "absolute_offset": 5880,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 40,
          "end": 48
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 68,
          "end": 76
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/validate-mirrors.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 37250,
          "human": "0.000037s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 9486,
        "bytes_printed": 4800,
        "matched_lines": 17,
        "matches": 24
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/metrics.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/metrics.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 61,
      "absolute_offset": 1719,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/metrics.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 6542,
          "human": "0.000007s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 2519,
        "bytes_printed": 271,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/truth-audit/fetch_raw.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/truth-audit/fetch_raw.mjs"
      },
      "lines": {
        "text": "    const meta = {\n"
      },
      "line_number": 31,
      "absolute_offset": 1275,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 10,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/truth-audit/fetch_raw.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 8583,
          "human": "0.000009s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 2045,
        "bytes_printed": 299,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/lib/envelope-builder.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope-builder.mjs"
      },
      "lines": {
        "text": "export function loadSnapshotEnvelopeSchema(schemaPath = \"schemas/snapshot-envelope.schema.json\") {\n"
      },
      "line_number": 105,
      "absolute_offset": 3508,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 74,
          "end": 82
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/lib/envelope-builder.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 10042,
          "human": "0.000010s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 5710,
        "bytes_printed": 382,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "  const keys = ['meta:scheduler:last_ok', 'rv:scheduler:last_ok'];\n"
      },
      "line_number": 176,
      "absolute_offset": 5364,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 17,
          "end": 22
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 685,
      "absolute_offset": 23049,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "  const envelopeProvider = eodProvider || sourceChain?.selected || sourceChain?.primary || 'unknown';\n"
      },
      "line_number": 879,
      "absolute_offset": 30131,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "  const envelopeDataDate = parseIsoDay(latestBar?.date) || parseIsoDay(asOf) || todayUtcDate();\n"
      },
      "line_number": 880,
      "absolute_offset": 30233,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "  const derivedStatus = envelopeDataDate\n"
      },
      "line_number": 881,
      "absolute_offset": 30329,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 24,
          "end": 32
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "    ? computeStatusFromDataDate(envelopeDataDate, now, maxStaleDays, pendingWindowMinutes)\n"
      },
      "line_number": 882,
      "absolute_offset": 30370,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 32,
          "end": 40
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "  const envelopeStatus = eodStatus || derivedStatus;\n"
      },
      "line_number": 886,
      "absolute_offset": 30513,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "  const freshness = envelopeStatus === 'fresh'\n"
      },
      "line_number": 901,
      "absolute_offset": 30982,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 20,
          "end": 28
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "    : envelopeStatus === 'stale'\n"
      },
      "line_number": 903,
      "absolute_offset": 31043,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 6,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "    meta: {\n"
      },
      "line_number": 909,
      "absolute_offset": 31191,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 4,
          "end": 9
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "      status: envelopeStatus,\n"
      },
      "line_number": 910,
      "absolute_offset": 31203,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 14,
          "end": 22
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "      data_date: envelopeDataDate,\n"
      },
      "line_number": 912,
      "absolute_offset": 31266,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 17,
          "end": 25
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "      provider: envelopeProvider,\n"
      },
      "line_number": 913,
      "absolute_offset": 31301,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 16,
          "end": 24
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "lines": {
        "text": "          selected: envelopeProvider || sourceChain?.selected || null,\n"
      },
      "line_number": 955,
      "absolute_offset": 32482,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 20,
          "end": 28
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/stock.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 18750,
          "human": "0.000019s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 33354,
        "bytes_printed": 3506,
        "matched_lines": 14,
        "matches": 14
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/lib/drop-threshold.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/drop-threshold.js"
      },
      "lines": {
        "text": " * @returns {object} Validation metadata for envelope\n"
      },
      "line_number": 67,
      "absolute_offset": 2395,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 45,
          "end": 53
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/lib/drop-threshold.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 7833,
          "human": "0.000008s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 4069,
        "bytes_printed": 328,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": " *   const state = buildModuleState(module, envelope, validationResult);\n"
      },
      "line_number": 8,
      "absolute_offset": 176,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 44,
          "end": 52
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": " * @param {object} envelope - Snapshot envelope\n"
      },
      "line_number": 62,
      "absolute_offset": 1434,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 39,
          "end": 47
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": "function evaluateFreshness(envelope, freshnessConfig) {\n"
      },
      "line_number": 66,
      "absolute_offset": 1596,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 27,
          "end": 35
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": "  const fetchedAt = new Date(envelope.metadata.fetched_at);\n"
      },
      "line_number": 68,
      "absolute_offset": 1678,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 29,
          "end": 37
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": " * @param {object} envelope - Snapshot envelope\n"
      },
      "line_number": 110,
      "absolute_offset": 2930,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 39,
          "end": 47
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": " * @param {object} validationResult - Validation result from envelope.js\n"
      },
      "line_number": 111,
      "absolute_offset": 2978,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 61,
          "end": 69
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": "export function buildModuleState(moduleName, envelope, validationResult, moduleConfig, options = {}) {\n"
      },
      "line_number": 116,
      "absolute_offset": 3224,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 45,
          "end": 53
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": "  const freshness = evaluateFreshness(envelope, moduleConfig.freshness);\n"
      },
      "line_number": 118,
      "absolute_offset": 3367,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 38,
          "end": 46
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": "    last_success_at: validationResult?.valid ? envelope.metadata.fetched_at : options.last_success_at || null,\n"
      },
      "line_number": 130,
      "absolute_offset": 3814,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 47,
          "end": 55
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": "    last_attempt_at: envelope.metadata.fetched_at || now,\n"
      },
      "line_number": 131,
      "absolute_offset": 3925,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 21,
          "end": 29
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": "    digest: envelope.metadata.digest,\n"
      },
      "line_number": 132,
      "absolute_offset": 3983,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 12,
          "end": 20
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": "    record_count: envelope.metadata.record_count,\n"
      },
      "line_number": 133,
      "absolute_offset": 4021,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 18,
          "end": 26
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "lines": {
        "text": "      upstream_status: envelope.metadata.upstream?.http_status || null,\n"
      },
      "line_number": 145,
      "absolute_offset": 4544,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 23,
          "end": 31
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/lib/module-state.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 12541,
          "human": "0.000013s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 7627,
        "bytes_printed": 3616,
        "matched_lines": 13,
        "matches": 15
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " *   const envelope = buildEnvelope(data, metadata);\n"
      },
      "line_number": 10,
      "absolute_offset": 222,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 11,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " *   const valid = validateEnvelope(envelope, registry);\n"
      },
      "line_number": 11,
      "absolute_offset": 275,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 19,
          "end": 35
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 36,
          "end": 44
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " * Build v3.0 snapshot envelope\n"
      },
      "line_number": 17,
      "absolute_offset": 395,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 23,
          "end": 31
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " * @returns {object} Complete envelope\n"
      },
      "line_number": 24,
      "absolute_offset": 759,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 30,
          "end": 38
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "    meta = dataOrOptions;\n"
      },
      "line_number": 33,
      "absolute_offset": 1125,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 4,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "    meta = metadata || {};\n"
      },
      "line_number": 38,
      "absolute_offset": 1258,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 4,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  const envelopeData = isObjectMap ? data : Array.isArray(data) ? data : [data];\n"
      },
      "line_number": 42,
      "absolute_offset": 1372,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  const envelope = {\n"
      },
      "line_number": 43,
      "absolute_offset": 1453,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 8,
          "end": 16
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "    data: envelopeData,\n"
      },
      "line_number": 79,
      "absolute_offset": 3203,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 10,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  envelope.metadata.digest = computeSnapshotDigest(envelope);\n"
      },
      "line_number": 84,
      "absolute_offset": 3285,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 51,
          "end": 59
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  return envelope;\n"
      },
      "line_number": 86,
      "absolute_offset": 3350,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 9,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " * Validate envelope schema (v3.0)\n"
      },
      "line_number": 90,
      "absolute_offset": 3376,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 12,
          "end": 20
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " * @param {object} envelope - Envelope to validate\n"
      },
      "line_number": 91,
      "absolute_offset": 3411,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "export function validateEnvelopeSchema(envelope) {\n"
      },
      "line_number": 94,
      "absolute_offset": 3524,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 16,
          "end": 32
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 39,
          "end": 47
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  if (!envelope.schema_version) errors.push(\"Missing schema_version\");\n"
      },
      "line_number": 98,
      "absolute_offset": 3630,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 7,
          "end": 15
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  if (envelope.schema_version !== \"3.0\") errors.push(`Invalid schema_version: ${envelope.schema_version}, expected 3.0`);\n"
      },
      "line_number": 99,
      "absolute_offset": 3701,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 6,
          "end": 14
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 80,
          "end": 88
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  if (!envelope.metadata) errors.push(\"Missing metadata\");\n"
      },
      "line_number": 100,
      "absolute_offset": 3823,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 7,
          "end": 15
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  if (!Array.isArray(envelope.data) && !(envelope.data && typeof envelope.data === \"object\")) {\n"
      },
      "line_number": 101,
      "absolute_offset": 3882,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 21,
          "end": 29
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 41,
          "end": 49
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 65,
          "end": 73
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  if (envelope.metadata) {\n"
      },
      "line_number": 106,
      "absolute_offset": 4071,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 6,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "    const m = envelope.metadata;\n"
      },
      "line_number": 107,
      "absolute_offset": 4098,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 14,
          "end": 22
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " * @param {object} envelope - Envelope to check\n"
      },
      "line_number": 188,
      "absolute_offset": 6240,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "export function checkPlausibility(envelope, rules) {\n"
      },
      "line_number": 192,
      "absolute_offset": 6410,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 34,
          "end": 42
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "    const values = evaluatePath(envelope, rule.path);\n"
      },
      "line_number": 200,
      "absolute_offset": 6603,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 32,
          "end": 40
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " * @param {object} envelope - Envelope to check\n"
      },
      "line_number": 236,
      "absolute_offset": 7544,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "export function checkUIContract(envelope, requiredPaths) {\n"
      },
      "line_number": 240,
      "absolute_offset": 7725,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 32,
          "end": 40
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "    const values = evaluatePath(envelope, path);\n"
      },
      "line_number": 248,
      "absolute_offset": 7959,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 32,
          "end": 40
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " * Validate envelope against registry config\n"
      },
      "line_number": 274,
      "absolute_offset": 8586,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 12,
          "end": 20
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " * @param {object} envelope - Envelope to validate\n"
      },
      "line_number": 275,
      "absolute_offset": 8631,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "export function validateEnvelope(envelope, moduleConfig) {\n"
      },
      "line_number": 279,
      "absolute_offset": 8826,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 16,
          "end": 32
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 33,
          "end": 41
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  const schemaResult = validateEnvelopeSchema(envelope);\n"
      },
      "line_number": 284,
      "absolute_offset": 8958,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 23,
          "end": 39
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 46,
          "end": 54
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  const recordCount = envelope.metadata.record_count;\n"
      },
      "line_number": 291,
      "absolute_offset": 9164,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 22,
          "end": 30
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "    const plausResult = checkPlausibility(envelope, moduleConfig.plausibility_rules);\n"
      },
      "line_number": 310,
      "absolute_offset": 9733,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 42,
          "end": 50
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "    const uiResult = checkUIContract(envelope, moduleConfig.ui_contract.required_paths);\n"
      },
      "line_number": 318,
      "absolute_offset": 10002,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 37,
          "end": 45
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " * @param {object} envelope - Envelope with metadata.fetched_at\n"
      },
      "line_number": 339,
      "absolute_offset": 10595,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 19,
          "end": 27
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": " * @returns {void} (mutates envelope.metadata.freshness)\n"
      },
      "line_number": 341,
      "absolute_offset": 10727,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 28,
          "end": 36
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "export function computeFreshness(envelope, freshnessConfig) {\n"
      },
      "line_number": 343,
      "absolute_offset": 10788,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 33,
          "end": 41
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  if (!envelope || !envelope.metadata) return;\n"
      },
      "line_number": 344,
      "absolute_offset": 10850,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 7,
          "end": 15
        },
        {
          "match": {
            "text": "envelope"
          },
          "start": 20,
          "end": 28
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  const fetchedAt = new Date(envelope.metadata.fetched_at);\n"
      },
      "line_number": 347,
      "absolute_offset": 10940,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 29,
          "end": 37
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  envelope.metadata.freshness = {\n"
      },
      "line_number": 358,
      "absolute_offset": 11406,
      "submatches": [
        {
          "match": {
            "text": "envelope"
          },
          "start": 2,
          "end": 10
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  validateEnvelopeSchema,\n"
      },
      "line_number": 369,
      "absolute_offset": 11663,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 2,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "lines": {
        "text": "  validateEnvelope,\n"
      },
      "line_number": 370,
      "absolute_offset": 11689,
      "submatches": [
        {
          "match": {
            "text": "validateEnvelope"
          },
          "start": 2,
          "end": 18
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/lib/envelope.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 57584,
          "human": "0.000058s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 11771,
        "bytes_printed": 10648,
        "matched_lines": 41,
        "matches": 50
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "scripts/update-macro-hub.v3.mjs"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/update-macro-hub.v3.mjs"
      },
      "lines": {
        "text": "  const meta = {\n"
      },
      "line_number": 1030,
      "absolute_offset": 37052,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 8,
          "end": 14
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/update-macro-hub.v3.mjs"
      },
      "lines": {
        "text": "    snapshot.meta = snapshot.meta || {};\n"
      },
      "line_number": 1165,
      "absolute_offset": 41934,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 13,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/update-macro-hub.v3.mjs"
      },
      "lines": {
        "text": "    schemaVersion: \"rv-mirror-v1\",\n"
      },
      "line_number": 1172,
      "absolute_offset": 42176,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 4,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/update-macro-hub.v3.mjs"
      },
      "lines": {
        "text": "      schemaVersion: \"v1\",\n"
      },
      "line_number": 1215,
      "absolute_offset": 43348,
      "submatches": [
        {
          "match": {
            "text": "schemaVersion"
          },
          "start": 6,
          "end": 19
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/update-macro-hub.v3.mjs"
      },
      "lines": {
        "text": "      meta: {\n"
      },
      "line_number": 1218,
      "absolute_offset": 43441,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 6,
          "end": 11
        }
      ]
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "scripts/update-macro-hub.v3.mjs"
      },
      "lines": {
        "text": "    providerState.meta = providerState.meta || {};\n"
      },
      "line_number": 1257,
      "absolute_offset": 44699,
      "submatches": [
        {
          "match": {
            "text": "meta ="
          },
          "start": 18,
          "end": 24
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "scripts/update-macro-hub.v3.mjs"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 16666,
          "human": "0.000017s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 45419,
        "bytes_printed": 1492,
        "matched_lines": 6,
        "matches": 6
      }
    }
  },
  {
    "type": "begin",
    "data": {
      "path": {
        "text": "functions/api/elliott-scanner.js"
      }
    }
  },
  {
    "type": "match",
    "data": {
      "path": {
        "text": "functions/api/elliott-scanner.js"
      },
      "lines": {
        "text": "            meta: {\n"
      },
      "line_number": 78,
      "absolute_offset": 2810,
      "submatches": [
        {
          "match": {
            "text": "meta:"
          },
          "start": 12,
          "end": 17
        }
      ]
    }
  },
  {
    "type": "end",
    "data": {
      "path": {
        "text": "functions/api/elliott-scanner.js"
      },
      "binary_offset": null,
      "stats": {
        "elapsed": {
          "secs": 0,
          "nanos": 11500,
          "human": "0.000012s"
        },
        "searches": 1,
        "searches_with_match": 1,
        "bytes_searched": 7259,
        "bytes_printed": 297,
        "matched_lines": 1,
        "matches": 1
      }
    }
  },
  {
    "data": {
      "elapsed_total": {
        "human": "0.007060s",
        "nanos": 7059708,
        "secs": 0
      },
      "stats": {
        "bytes_printed": 124208,
        "bytes_searched": 1321767,
        "elapsed": {
          "human": "0.002061s",
          "nanos": 2061117,
          "secs": 0
        },
        "matched_lines": 456,
        "matches": 525,
        "searches": 291,
        "searches_with_match": 73
      }
    },
    "type": "summary"
  }
]
