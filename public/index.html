<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>RubikVault ‚Äì Decode the Markets</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="RubikVault ‚Äì calm, data-driven multi-asset market insights across stocks, crypto, macro and commodities. Educational only." />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- HEADER -->
  <header class="rv-header">
    <div class="rv-header-inner">
      <a class="rv-brand" href="/" aria-label="RubikVault">
        <img class="rv-brand-icon" src="/assets/rv-icon.png" alt="" />
        <span class="rv-brand-text">RubikVault</span>
      </a>

      <nav class="rv-nav">
        <a class="rv-social-link" href="https://www.youtube.com/@RubikVault" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M21.58 7.19a2.5 2.5 0 0 0-1.76-1.77C18.25 5 12 5 12 5s-6.25 0-7.82.42A2.5 2.5 0 0 0 2.42 7.2 26.6 26.6 0 0 0 2 12s0 2.55.42 4.81a2.5 2.5 0 0 0 1.76 1.77C5.75 19 12 19 12 19s6.25 0 7.82-.42a2.5 2.5 0 0 0 1.76-1.77C22 14.55 22 12 22 12s0-2.55-.42-4.81ZM10 15.5v-7l6 3.5-6 3.5Z" />
          </svg>
        </a>
        <a class="rv-social-link" href="https://x.com/RubikVault" target="_blank" rel="noopener noreferrer" aria-label="X">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M18.9 2H22l-6.79 7.76L23 22h-6.2l-4.86-6.02L6.66 22H3.5l7.26-8.3L3 2h6.35l4.4 5.52L18.9 2Zm-1.09 18h1.72L8.4 3.93H6.56L17.81 20Z" />
          </svg>
        </a>
        <a class="rv-social-link" href="https://www.tiktok.com/@rubikvault" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M16.7 5.2c.8 1.2 2.1 2 3.6 2.1v3.1c-1.7-.1-3.3-.7-4.6-1.7v7.4c0 3.4-2.8 6.2-6.2 6.2S3.3 19.5 3.3 16.1s2.8-6.2 6.2-6.2c.4 0 .8 0 1.2.1v3.3c-.4-.1-.8-.2-1.2-.2-1.7 0-3.1 1.4-3.1 3.1s1.4 3.1 3.1 3.1 3.1-1.4 3.1-3.1V2h3.1c0 1.2.3 2.3 1 3.2Z" />
          </svg>
        </a>
        <a class="rv-social-link" href="https://www.instagram.com/rubikvault" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
          <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Zm10 2H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3Zm-5 3.5a4.5 4.5 0 1 1 0 9 4.5 4.5 0 0 1 0-9Zm0 2a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5ZM17.8 6.2a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z" />
          </svg>
        </a>
      </nav>

      <div class="rv-header-tools" aria-live="polite">
        <div class="rv-data-updated" style="font-size: 12px; color: var(--rv-text-muted);">
          Data updated: <span id="rv-data-updated-date">Loading...</span> (daily snapshots)
        </div>
        <div class="rv-market-clock">
          <span class="rv-clock-time" id="rv-ny-time">NY: --:--:--</span>
          <span class="rv-clock-status">
            <span class="rv-led" data-rv-led="closed"></span>
            <span class="rv-market-label" data-rv-market-label>Closed</span>
            <span class="rv-market-countdown" id="rv-market-countdown">opens in --:--:--</span>
          </span>
        </div>
      </div>
    </div>
  </header>

  <!-- MAIN CONTENT - CLEAN SLATE -->
  <main class="rv-main" style="max-width: 1400px; margin: 0 auto; padding: 2rem;">
    
    <h1 style="text-align: center; margin: 2rem 0; color: #e5e7eb;">
      üöÄ RubikVault - Clean Slate Edition
    </h1>

    <p style="text-align: center; color: #94a3b8; margin-bottom: 3rem;">
      Starting fresh with a simple, working architecture. One block at a time.
    </p>

    <!-- FIRST BLOCK: Market Indices (PROOF OF CONCEPT) -->
    <section class="rv-card" style="margin-bottom: 2rem; padding: 2rem;">
      <h2 style="color: #e5e7eb; margin-bottom: 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0.5rem;">
        üìä Major Market Indices
      </h2>
      
      <div id="indices-content" style="min-height: 200px;">
        <div style="text-align: center; padding: 2rem; color: #64748b;">
          Loading market data...
        </div>
      </div>
      
      <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.05); font-size: 0.875rem; color: #64748b;">
        Source: <code>/api/market-health</code> | Updated: <span id="indices-updated">--</span>
      </div>
    </section>

    <!-- More blocks will be added here, one at a time -->
    
  </main>

  <!-- FOOTER -->
  <footer class="rv-footer">
    <div class="rv-footer-inner">
      <div class="rv-footer-brand">RubikVault</div>
      <div class="rv-footer-links">
        <a href="imprint.html">Imprint</a>
        <a href="privacy.html">Privacy</a>
        <a href="disclaimer.html">Disclaimer</a>
      </div>
    </div>
    <p>RubikVault provides educational content only and does not offer financial advice or brokerage services.</p>
    <p>&copy; 2026 RubikVault. All rights reserved.</p>
  </footer>

  <!-- Market Clock Script -->
  <script src="market-clock.js"></script>
  
  <!-- Update Date -->
  <script>
    (function() {
      const el = document.getElementById("rv-data-updated-date");
      if (el) {
        const today = new Date();
        el.textContent = today.toISOString().split("T")[0];
      }
    })();
  </script>

  <!-- SIMPLE BLOCK LOADER - NO COMPLEX FRAMEWORK! -->
  <script>
    (async function() {
      const container = document.getElementById('indices-content');
      const updatedEl = document.getElementById('indices-updated');
      
      try {
        // Fetch data from API
        const response = await fetch('/api/market-health');
        const data = await response.json();
        
        if (!data.ok) {
          throw new Error(data.error?.message || 'API error');
        }
        
        // Extract indices data
        const items = data.data?.items || [];
        const spy = items.find(i => i.symbol === 'SPY');
        const qqq = items.find(i => i.symbol === 'QQQ');
        const iwm = items.find(i => i.symbol === 'IWM');
        
        // Calculate approximate index values (ETF price * 10)
        const sp500 = spy ? (spy.close * 10).toFixed(2) : 'N/A';
        const nasdaq = qqq ? (qqq.close * 10).toFixed(2) : 'N/A';
        const russell = iwm ? (iwm.close * 10).toFixed(2) : 'N/A';
        
        // Simple rendering - NO COMPLEX FRAMEWORK!
        container.innerHTML = `
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
            
            <div style="padding: 1.5rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; border: 1px solid rgba(16, 185, 129, 0.2);">
              <div style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 0.5rem;">S&P 500</div>
              <div style="font-size: 2rem; font-weight: 700; color: ${spy?.changePct >= 0 ? '#10b981' : '#ef4444'};">
                ${sp500}
              </div>
              <div style="font-size: 0.875rem; color: ${spy?.changePct >= 0 ? '#10b981' : '#ef4444'}; margin-top: 0.5rem;">
                ${spy ? (spy.changePct >= 0 ? '+' : '') + spy.changePct.toFixed(2) + '%' : '--'}
              </div>
            </div>
            
            <div style="padding: 1.5rem; background: rgba(59, 130, 246, 0.1); border-radius: 8px; border: 1px solid rgba(59, 130, 246, 0.2);">
              <div style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 0.5rem;">Nasdaq</div>
              <div style="font-size: 2rem; font-weight: 700; color: ${qqq?.changePct >= 0 ? '#10b981' : '#ef4444'};">
                ${nasdaq}
              </div>
              <div style="font-size: 0.875rem; color: ${qqq?.changePct >= 0 ? '#10b981' : '#ef4444'}; margin-top: 0.5rem;">
                ${qqq ? (qqq.changePct >= 0 ? '+' : '') + qqq.changePct.toFixed(2) + '%' : '--'}
              </div>
            </div>
            
            <div style="padding: 1.5rem; background: rgba(168, 85, 247, 0.1); border-radius: 8px; border: 1px solid rgba(168, 85, 247, 0.2);">
              <div style="font-size: 0.875rem; color: #94a3b8; margin-bottom: 0.5rem;">Russell 2000</div>
              <div style="font-size: 2rem; font-weight: 700; color: ${iwm?.changePct >= 0 ? '#10b981' : '#ef4444'};">
                ${russell}
              </div>
              <div style="font-size: 0.875rem; color: ${iwm?.changePct >= 0 ? '#10b981' : '#ef4444'}; margin-top: 0.5rem;">
                ${iwm ? (iwm.changePct >= 0 ? '+' : '') + iwm.changePct.toFixed(2) + '%' : '--'}
              </div>
            </div>
            
          </div>
        `;
        
        // Update timestamp
        if (updatedEl && data.meta?.updatedAt) {
          updatedEl.textContent = new Date(data.meta.updatedAt).toLocaleString();
        }
        
      } catch (error) {
        console.error('Failed to load indices:', error);
        container.innerHTML = `
          <div style="text-align: center; padding: 2rem; color: #ef4444;">
            ‚ùå Failed to load data: ${error.message}
          </div>
        `;
      }
    })();
  </script>

</body>
</html>
